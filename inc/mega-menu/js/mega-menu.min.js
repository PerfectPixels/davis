var menuSettings;!function(e,t){"use strict";var a;a=menuSettings={init:function(){a.$body=e("body"),a.$modal=e("#menu-modal"),a.$primaryCheckbox=e("#locations-primary_navigation"),a.itemData={},a.templates={menus:t.template(e("#pp-tmpl-menus").html()),title:t.template(e("#pp-tmpl-title").html()),mega:t.template(e("#pp-tmpl-mega").html()),background:t.template(e("#pp-tmpl-background").html()),icon:t.template(e("#pp-tmpl-icon").html()),content:t.template(e("#pp-tmpl-content").html()),general:t.template(e("#pp-tmpl-general").html())},a.frame=wp.media({library:{type:"image"}}),this.initActions()},initActions:function(){a.$body.on("click",".opensettings",this.openModal).on("click",".mega-modal-backdrop, .mega-modal-close, .pp-button-cancel",this.closeModal),a.$modal.on("click",".pp-mega-menu-item-setting-tab a",this.switchPanel).on("click",".item-controls span",this.resizeMegaColumn).on("click",".pp-button-save",this.saveChanges),a.$primaryCheckbox.on("change",function(){e(this).is(":checked")?a.$body.removeClass("hide-settings"):a.$body.addClass("hide-settings")}),a.$primaryCheckbox.is(":checked")?a.$body.removeClass("hide-settings"):a.$body.addClass("hide-settings")},openModal:function(){return a.getItemData(this),a.$modal.show(),a.$body.addClass("modal-open"),a.render(this),!1},closeModal:function(){return a.$modal.hide().find(".pp-menu-item-tab-content").html(""),a.$body.removeClass("modal-open"),!1},switchPanel:function(t){t.preventDefault();var i=e(this).parent(),n=i.data("panel");i.addClass("active-item-setting-tab").siblings(".active-item-setting-tab").removeClass("active-item-setting-tab"),a.openSettings(n)},render:function(t){var i=this;a.$modal.find(".pp-mega-menu-item-setting-tabs").html(a.templates.menus(a.itemData));var n=a.$modal.find(".pp-mega-menu-item-setting-tabs .pp-mega-menu-to-content"),d=e(t).parents(".menu-item-settings").find("input.edit-menu-item-title").val();a.$modal.find(".pp-mega-menu-item-header-bar").html(a.templates.title({title:d})),n.each(function(){i.openSettings(e(this).data("panel"))})},openSettings:function(e){var t=a.$modal.find(".pp-menu-item-tab-content"),i=t.children("#inside-"+e);if(i.length)i.addClass("active").siblings().removeClass("active");else{var n=a.$modal.find(".pp-mega-menu-item-setting-tabs .pp-mega-menu-to-content[data-panel="+e+"]");t.append(a.templates[e](a.itemData)),n.hasClass("active-item-setting-tab")&&t.children("#inside-"+e).addClass("active").siblings().removeClass("active"),"mega"==e&&a.initMegaColumns(),"background"==e&&a.initBackgroundFields(),"icon"==e&&a.initIconFields()}},resizeMegaColumn:function(a){a.preventDefault();var i,n=["20.00%","25.00%","33.33%","50.00%","66.66%","75.00%","100.00%"],d=e(this),o=d.closest(".menu-item-container"),s=o.data("width"),m=t.indexOf(n,s);-1!==m&&(i=d.hasClass("submenu-bigger")?m===n.length?m:m+1:0===m?m:m-1,o[0].style.width=n[i],o.data("width",n[i]),o.find(".menu-item-handle .menu-item-width").val(n[i]))},initMegaColumns:function(){var i=a.$modal.find("#inside-mega .menu-item-container"),n="25.00%";i.length&&(i.length<4&&(n=String((100/i.length).toFixed(2))+"%"),t.each(i,function(t){var a=t.dataset.width;a=a||n,t.style.width=a,t.dataset.width=a,e(t).find(".menu-item-handle .menu-item-width").val(a)}))},initBackgroundFields:function(){a.$modal.find(".background-color-picker").wpColorPicker(),a.$modal.on("click",".item-media .upload-button",function(t){t.preventDefault();var i=e(this);a.frame.off("select"),a.frame.on("select",function(){var e=a.frame.state().get("selection").first().toJSON().url;i.siblings(".thumbnail-image").html('<img src="'+e+'">'),i.siblings("input").val(e),i.addClass("hidden"),i.siblings(".remove-button").removeClass("hidden")}),a.frame.open()}).on("click",".item-media .remove-button",function(t){t.preventDefault();var a=e(this);a.siblings(".thumbnail-image").html(""),a.siblings("input").val(""),a.addClass("hidden"),a.siblings(".upload-button").removeClass("hidden")}),a.$modal.on("change",".image-size select",function(){var t=e(this),a=t.parents(".inside-background");"background"==t.val()?(a.find(".background-position, .background-repeat, .background-size").removeClass("hidden"),a.find(".image-position, .image-margin").addClass("hidden")):(a.find(".background-position, .background-repeat, .background-size").addClass("hidden"),a.find(".image-position, .image-margin").removeClass("hidden"))})},initIconFields:function(){var t=a.$modal.find("#pp-icon-input"),i=a.$modal.find(".pp-icon-selector .selected-icon"),n=a.$modal.find(".pp-icon-selector .icons-content i");a.$modal.on("click",".pp-icon-selector .icons-content span",function(){var a=e(this),n=a.find("i").data("icon");e(".pp-icon-selector .icons-content span.active").removeClass("active"),a.addClass("active"),t.val(n),i.html('<i class="'+n+'"></i>')}),a.$modal.on("click",".pp-icon-selector .remove-icon",function(){i.html(""),t.val("")}),a.$modal.on("click",".pp-icon-selector .icons-tab",function(){var t=e(this),a=e(".pp-icon-selector .icons-content."+t.data("tab"));t.hasClass("active")||(t.addClass("active").siblings(".active").removeClass("active"),a.addClass("active").siblings(".active").removeClass("active"))}),a.$modal.on("keyup",".pp-icon-search",function(t){var a=e(this).val().toUpperCase(),i=n.parent();a?i.hide().filter(function(){return e(this).find("i").data("icon").toUpperCase().indexOf(a)>-1}).show():i.show()})},getItemData:function(i){var n=e(i).closest("li.menu-item"),d=n.find(".pp-data"),o=n.childMenuItems();a.itemData={depth:n.menuItemDepth(),megaData:{mega:d.data("mega"),mega_width:d.data("mega_width"),width:d.data("width"),background:d.data("background"),img_type:d.data("img_type"),img_size:d.data("img_size"),img_pos:d.data("img_pos"),img_no_margin:d.data("img_no_margin"),icon:d.data("icon"),icon_pos:d.data("icon_pos"),hide_text:d.data("hide_text"),hide_desktop:d.data("hide_desktop"),hide_mobile:d.data("hide_mobile"),hide_img_desktop:d.data("hide_img_desktop"),hide_img_mobile:d.data("hide_img_mobile"),hot:d.data("hot"),uppercase_text:d.data("uppercase_text"),new:d.data("new"),trending:d.data("trending"),sale:d.data("sale"),disable_link:d.data("disable_link"),content:d.html()},data:n.getItemData(),children:[],originalElement:n.get(0)},t.isEmpty(o)||t.each(o,function(t){var i=e(t),n=i.find(".pp-data"),d=i.menuItemDepth();a.itemData.children.push({depth:d,subDepth:d-a.itemData.depth-1,data:i.getItemData(),megaData:{mega:n.data("mega"),mega_width:n.data("mega_width"),width:n.data("width"),background:n.data("background"),img_type:n.data("img_type"),img_size:n.data("img_size"),img_pos:n.data("img_pos"),img_no_margin:n.data("img_no_margin"),icon:n.data("icon"),icon_pos:n.data("icon_pos"),hide_text:n.data("hide_text"),hide_desktop:n.data("hide_desktop"),hide_mobile:n.data("hide_mobile"),hide_img_desktop:n.data("hide_img_desktop"),hide_img_mobile:n.data("hide_img_mobile"),hot:n.data("hot"),uppercase_text:n.data("uppercase_text"),new:n.data("new"),trending:n.data("trending"),sale:n.data("sale"),disable_link:n.data("disable_link"),content:n.html()},originalElement:t})})},setItemData:function(a,i,n){var d=["mega","hide_text","uppercase_text","disable_link","img_no_margin","hide_desktop","hide_mobile","hot","new","trending","sale","hide_img_desktop","hide_img_mobile"];e.each(d,function(e,a){t.has(i,a)||(i[a]=!1)});var o=e(a).find(".pp-data");t.has(i,"content")&&(o.html(i.content),delete i.content),o.data(i)},getFieldName:function(e,t){return e=e.split("."),e="["+e.join("][")+"]","menu-item["+t+"]"+e},saveChanges:function(){var i=a.$modal.find(".pp-menu-item-tab-content :input").serialize(),n=a.$modal.find(".pp-mega-menu-item-controls .spinner");return n.addClass("is-active"),e.post(ajaxurl,{action:"pp_save_menu_item_data",data:i},function(e){if(e.success){var i=e.data["menu-item"];t.has(i,a.itemData.data["menu-item-db-id"])&&a.setItemData(a.itemData.originalElement,i[a.itemData.data["menu-item-db-id"]],0),t.each(a.itemData.children,function(e){t.has(i,e.data["menu-item-db-id"])&&a.setItemData(e.originalElement,i[e.data["menu-item-db-id"]],1)}),n.removeClass("is-active"),a.closeModal()}}),!1}},e(function(){menuSettings.init()})}(jQuery,_);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lZ2EtbWVudS5qcyJdLCJuYW1lcyI6WyJtZW51U2V0dGluZ3MiLCIkIiwiXyIsIm9wdGlvbnMiLCJpbml0IiwiJGJvZHkiLCIkbW9kYWwiLCIkcHJpbWFyeUNoZWNrYm94IiwiaXRlbURhdGEiLCJ0ZW1wbGF0ZXMiLCJtZW51cyIsInRlbXBsYXRlIiwiaHRtbCIsInRpdGxlIiwibWVnYSIsImJhY2tncm91bmQiLCJpY29uIiwiY29udGVudCIsImdlbmVyYWwiLCJmcmFtZSIsIndwIiwibWVkaWEiLCJsaWJyYXJ5IiwidHlwZSIsInRoaXMiLCJpbml0QWN0aW9ucyIsIm9uIiwib3Blbk1vZGFsIiwiY2xvc2VNb2RhbCIsInN3aXRjaFBhbmVsIiwicmVzaXplTWVnYUNvbHVtbiIsInNhdmVDaGFuZ2VzIiwiaXMiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiZ2V0SXRlbURhdGEiLCJzaG93IiwicmVuZGVyIiwiaGlkZSIsImZpbmQiLCJlIiwicHJldmVudERlZmF1bHQiLCIkZWwiLCJwYXJlbnQiLCJwYW5lbCIsImRhdGEiLCJzaWJsaW5ncyIsIm9wZW5TZXR0aW5ncyIsIm1lbnVJdGVtIiwiX3RoaXMiLCIkbWVudVBhbmVscyIsInBhcmVudHMiLCJ2YWwiLCJlYWNoIiwiJGNvbnRlbnQiLCIkcGFuZWwiLCJjaGlsZHJlbiIsImxlbmd0aCIsIiR0YWJQYW5lbCIsImFwcGVuZCIsImhhc0NsYXNzIiwiaW5pdE1lZ2FDb2x1bW5zIiwiaW5pdEJhY2tncm91bmRGaWVsZHMiLCJpbml0SWNvbkZpZWxkcyIsIm5leHQiLCJzdGVwcyIsIiRjb2x1bW4iLCJjbG9zZXN0Iiwid2lkdGgiLCJjdXJyZW50IiwiaW5kZXhPZiIsInN0eWxlIiwiJGNvbHVtbnMiLCJkZWZhdWx0V2lkdGgiLCJTdHJpbmciLCJ0b0ZpeGVkIiwiY29sdW1uIiwiZGF0YXNldCIsIndwQ29sb3JQaWNrZXIiLCJvZmYiLCJ1cmwiLCJzdGF0ZSIsImdldCIsImZpcnN0IiwidG9KU09OIiwib3BlbiIsIiRjb250YWluZXIiLCIkaW5wdXQiLCIkcHJldmlldyIsIiRpY29ucyIsIiR0YXJnZXQiLCJ0ZXJtIiwidG9VcHBlckNhc2UiLCIkaWNvbkNvbnRhaW5lciIsImZpbHRlciIsIiRtZW51SXRlbSIsIiRtZW51RGF0YSIsImNoaWxkTWVudUl0ZW1zIiwiZGVwdGgiLCJtZW51SXRlbURlcHRoIiwibWVnYURhdGEiLCJtZWdhX3dpZHRoIiwiaW1nX3R5cGUiLCJpbWdfc2l6ZSIsImltZ19wb3MiLCJpbWdfbm9fbWFyZ2luIiwiaWNvbl9wb3MiLCJoaWRlX3RleHQiLCJoaWRlX2Rlc2t0b3AiLCJoaWRlX21vYmlsZSIsImhpZGVfaW1nX2Rlc2t0b3AiLCJoaWRlX2ltZ19tb2JpbGUiLCJob3QiLCJ1cHBlcmNhc2VfdGV4dCIsIm5ldyIsInRyZW5kaW5nIiwic2FsZSIsImRpc2FibGVfbGluayIsIm9yaWdpbmFsRWxlbWVudCIsImlzRW1wdHkiLCJpdGVtIiwiJGl0ZW0iLCIkaXRlbURhdGEiLCJwdXNoIiwic3ViRGVwdGgiLCJzZXRJdGVtRGF0YSIsImNoZWNrYm94ZXMiLCJpbmRleCIsInZhbHVlIiwiaGFzIiwiJGRhdGFIb2xkZXIiLCJnZXRGaWVsZE5hbWUiLCJuYW1lIiwiaWQiLCJzcGxpdCIsImpvaW4iLCJzZXJpYWxpemUiLCIkc3Bpbm5lciIsInBvc3QiLCJhamF4dXJsIiwiYWN0aW9uIiwicmVzIiwic3VjY2VzcyIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsZUFFQSxTQUFBQyxFQUFBQyxHQUNBLFlBRUEsSUFBQUMsRUFDQUEsR0FBQUgsY0FDQUksS0FBQSxXQUNBRCxFQUFBRSxNQUFBSixFQUFBLFFBQ0FFLEVBQUFHLE9BQUFMLEVBQUEsZUFDQUUsRUFBQUksaUJBQUFOLEVBQUEsaUNBQ0FFLEVBQUFLLFlBQ0FMLEVBQUFNLFdBQ0FDLE1BQUFSLEVBQUFTLFNBQUFWLEVBQUEsa0JBQUFXLFFBQ0FDLE1BQUFYLEVBQUFTLFNBQUFWLEVBQUEsa0JBQUFXLFFBQ0FFLEtBQUFa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OUMsRUFBQStILElBQUFwRixFQUFBRyxFQUFBSCxLQUFBLHFCQUlBMUMsRUFBQTBILFlBQUE3RSxFQUFBc0UsZ0JBQUF6RSxFQUFBRyxFQUFBSCxLQUFBLG9CQUFBLEtBR0E0RixFQUFBeEcsWUFBQSxhQUNBOUIsRUFBQXlCLGlCQUdBLElBSUEzQixFQUFBLFdBQ0FELGFBQUFJLFVBRUEySSxPQUFBN0kiLCJmaWxlIjoibWVnYS1tZW51Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBtZW51U2V0dGluZ3M7XHJcblxyXG4oZnVuY3Rpb24gKCQsIF8pIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdHZhciBvcHRpb25zO1xyXG5cdG9wdGlvbnMgPSBtZW51U2V0dGluZ3MgPSB7XHJcblx0XHRpbml0OiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdG9wdGlvbnMuJGJvZHkgPSAkKCdib2R5Jyk7XHJcblx0XHRcdG9wdGlvbnMuJG1vZGFsID0gJCgnI21lbnUtbW9kYWwnKTtcclxuXHRcdFx0b3B0aW9ucy4kcHJpbWFyeUNoZWNrYm94ID0gJCgnI2xvY2F0aW9ucy1wcmltYXJ5X25hdmlnYXRpb24nKTtcclxuXHRcdFx0b3B0aW9ucy5pdGVtRGF0YSA9IHt9O1xyXG5cdFx0XHRvcHRpb25zLnRlbXBsYXRlcyA9IHtcclxuXHRcdFx0XHRtZW51cyAgICAgOiBfLnRlbXBsYXRlKCQoJyNwcC10bXBsLW1lbnVzJykuaHRtbCgpKSxcclxuXHRcdFx0XHR0aXRsZSAgICAgOiBfLnRlbXBsYXRlKCQoJyNwcC10bXBsLXRpdGxlJykuaHRtbCgpKSxcclxuXHRcdFx0XHRtZWdhICAgICAgOiBfLnRlbXBsYXRlKCQoJyNwcC10bXBsLW1lZ2EnKS5odG1sKCkpLFxyXG5cdFx0XHRcdGJhY2tncm91bmQ6IF8udGVtcGxhdGUoJCgnI3BwLXRtcGwtYmFja2dyb3VuZCcpLmh0bWwoKSksXHJcblx0XHRcdFx0aWNvbiAgICAgIDogXy50ZW1wbGF0ZSgkKCcjcHAtdG1wbC1pY29uJykuaHRtbCgpKSxcclxuXHRcdFx0XHRjb250ZW50ICAgOiBfLnRlbXBsYXRlKCQoJyNwcC10bXBsLWNvbnRlbnQnKS5odG1sKCkpLFxyXG5cdFx0XHRcdGdlbmVyYWwgICA6IF8udGVtcGxhdGUoJCgnI3BwLXRtcGwtZ2VuZXJhbCcpLmh0bWwoKSlcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdG9wdGlvbnMuZnJhbWUgPSB3cC5tZWRpYSh7XHJcblx0XHRcdFx0bGlicmFyeToge1xyXG5cdFx0XHRcdFx0dHlwZTogJ2ltYWdlJ1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLmluaXRBY3Rpb25zKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGluaXRBY3Rpb25zOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdG9wdGlvbnMuJGJvZHlcclxuXHRcdFx0XHQub24oJ2NsaWNrJywgJy5vcGVuc2V0dGluZ3MnLCB0aGlzLm9wZW5Nb2RhbClcclxuXHRcdFx0XHQub24oJ2NsaWNrJywgJy5tZWdhLW1vZGFsLWJhY2tkcm9wLCAubWVnYS1tb2RhbC1jbG9zZSwgLnBwLWJ1dHRvbi1jYW5jZWwnLCB0aGlzLmNsb3NlTW9kYWwpO1xyXG5cclxuXHRcdFx0b3B0aW9ucy4kbW9kYWxcclxuXHRcdFx0XHQub24oJ2NsaWNrJywgJy5wcC1tZWdhLW1lbnUtaXRlbS1zZXR0aW5nLXRhYiBhJywgdGhpcy5zd2l0Y2hQYW5lbClcclxuXHRcdFx0XHQub24oJ2NsaWNrJywgJy5pdGVtLWNvbnRyb2xzIHNwYW4nLCB0aGlzLnJlc2l6ZU1lZ2FDb2x1bW4pXHJcblx0XHRcdFx0Lm9uKCdjbGljaycsICcucHAtYnV0dG9uLXNhdmUnLCB0aGlzLnNhdmVDaGFuZ2VzKTtcclxuXHJcbiAgICAgICAgICAgIG9wdGlvbnMuJHByaW1hcnlDaGVja2JveFxyXG4gICAgICAgICAgICAgICAgLm9uKCAnY2hhbmdlJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoICEkKCB0aGlzICkuaXMoICc6Y2hlY2tlZCcgKSApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLiRib2R5LmFkZENsYXNzKCAnaGlkZS1zZXR0aW5ncycgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLiRib2R5LnJlbW92ZUNsYXNzKCAnaGlkZS1zZXR0aW5ncycgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcblx0XHRcdGlmICggIW9wdGlvbnMuJHByaW1hcnlDaGVja2JveC5pcyggJzpjaGVja2VkJyApICl7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLiRib2R5LmFkZENsYXNzKCAnaGlkZS1zZXR0aW5ncycgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuJGJvZHkucmVtb3ZlQ2xhc3MoICdoaWRlLXNldHRpbmdzJyApO1xyXG4gICAgICAgICAgICB9XHJcblx0XHR9LFxyXG5cclxuXHRcdG9wZW5Nb2RhbDogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRvcHRpb25zLmdldEl0ZW1EYXRhKHRoaXMpO1xyXG5cclxuXHRcdFx0b3B0aW9ucy4kbW9kYWwuc2hvdygpO1xyXG5cdFx0XHRvcHRpb25zLiRib2R5LmFkZENsYXNzKCdtb2RhbC1vcGVuJyk7XHJcblx0XHRcdG9wdGlvbnMucmVuZGVyKHRoaXMpO1xyXG5cclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRjbG9zZU1vZGFsOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdG9wdGlvbnMuJG1vZGFsLmhpZGUoKS5maW5kKCcucHAtbWVudS1pdGVtLXRhYi1jb250ZW50JykuaHRtbCgnJyk7XHJcblx0XHRcdG9wdGlvbnMuJGJvZHkucmVtb3ZlQ2xhc3MoJ21vZGFsLW9wZW4nKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRzd2l0Y2hQYW5lbDogZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdFx0dmFyICRlbCA9ICQodGhpcykucGFyZW50KCksXHJcblx0XHRcdFx0cGFuZWwgPSAkZWwuZGF0YSgncGFuZWwnKTtcclxuXHJcblx0XHRcdCRlbC5hZGRDbGFzcygnYWN0aXZlLWl0ZW0tc2V0dGluZy10YWInKS5zaWJsaW5ncygnLmFjdGl2ZS1pdGVtLXNldHRpbmctdGFiJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZS1pdGVtLXNldHRpbmctdGFiJyk7XHJcblx0XHRcdG9wdGlvbnMub3BlblNldHRpbmdzKHBhbmVsKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0cmVuZGVyOiBmdW5jdGlvbiAobWVudUl0ZW0pIHtcclxuXHRcdFx0dmFyIF90aGlzID0gdGhpcztcclxuXHJcblx0XHRcdC8vIFJlbmRlciBtZW51XHJcblx0XHRcdG9wdGlvbnMuJG1vZGFsLmZpbmQoJy5wcC1tZWdhLW1lbnUtaXRlbS1zZXR0aW5nLXRhYnMnKS5odG1sKG9wdGlvbnMudGVtcGxhdGVzLm1lbnVzKG9wdGlvbnMuaXRlbURhdGEpKTtcclxuXHJcblx0XHRcdHZhciAkbWVudVBhbmVscyA9IG9wdGlvbnMuJG1vZGFsLmZpbmQoJy5wcC1tZWdhLW1lbnUtaXRlbS1zZXR0aW5nLXRhYnMgLnBwLW1lZ2EtbWVudS10by1jb250ZW50Jyk7XHJcblxyXG5cdFx0XHQvLyBSZW5kZXIgdGl0bGVcclxuXHRcdFx0dmFyIHRpdGxlID0gJChtZW51SXRlbSkucGFyZW50cygnLm1lbnUtaXRlbS1zZXR0aW5ncycpLmZpbmQoJ2lucHV0LmVkaXQtbWVudS1pdGVtLXRpdGxlJykudmFsKCk7XHJcblx0XHRcdG9wdGlvbnMuJG1vZGFsLmZpbmQoJy5wcC1tZWdhLW1lbnUtaXRlbS1oZWFkZXItYmFyJykuaHRtbChvcHRpb25zLnRlbXBsYXRlcy50aXRsZSh7dGl0bGU6IHRpdGxlfSkpO1xyXG5cclxuXHRcdFx0Ly8gUmVuZGVyIGNvbnRlbnRcclxuXHRcdFx0JG1lbnVQYW5lbHMuZWFjaChmdW5jdGlvbigpe1xyXG5cdFx0XHRcdF90aGlzLm9wZW5TZXR0aW5ncygkKHRoaXMpLmRhdGEoJ3BhbmVsJykpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0b3BlblNldHRpbmdzOiBmdW5jdGlvbiAocGFuZWwpIHtcclxuXHRcdFx0dmFyICRjb250ZW50ID0gb3B0aW9ucy4kbW9kYWwuZmluZCgnLnBwLW1lbnUtaXRlbS10YWItY29udGVudCcpLFxyXG5cdFx0XHRcdCRwYW5lbCA9ICRjb250ZW50LmNoaWxkcmVuKCcjaW5zaWRlLScgKyBwYW5lbCk7XHJcblxyXG5cdFx0XHRpZiAoJHBhbmVsLmxlbmd0aCkge1xyXG5cdFx0XHRcdCRwYW5lbC5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dmFyICR0YWJQYW5lbCA9IG9wdGlvbnMuJG1vZGFsLmZpbmQoJy5wcC1tZWdhLW1lbnUtaXRlbS1zZXR0aW5nLXRhYnMgLnBwLW1lZ2EtbWVudS10by1jb250ZW50W2RhdGEtcGFuZWw9JytwYW5lbCsnXScpO1xyXG5cclxuXHRcdFx0XHQkY29udGVudC5hcHBlbmQob3B0aW9ucy50ZW1wbGF0ZXNbcGFuZWxdKG9wdGlvbnMuaXRlbURhdGEpKTtcclxuXHJcblx0XHRcdFx0aWYgKCR0YWJQYW5lbC5oYXNDbGFzcygnYWN0aXZlLWl0ZW0tc2V0dGluZy10YWInKSl7XHJcblx0XHRcdFx0XHQkY29udGVudC5jaGlsZHJlbignI2luc2lkZS0nICsgcGFuZWwpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICgnbWVnYScgPT0gcGFuZWwpIHtcclxuXHRcdFx0XHRcdG9wdGlvbnMuaW5pdE1lZ2FDb2x1bW5zKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICgnYmFja2dyb3VuZCcgPT0gcGFuZWwpIHtcclxuXHRcdFx0XHRcdG9wdGlvbnMuaW5pdEJhY2tncm91bmRGaWVsZHMoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCdpY29uJyA9PSBwYW5lbCkge1xyXG5cdFx0XHRcdFx0b3B0aW9ucy5pbml0SWNvbkZpZWxkcygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRyZXNpemVNZWdhQ29sdW1uOiBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHR2YXIgc3RlcHMgPSBbJzIwLjAwJScsICcyNS4wMCUnLCAnMzMuMzMlJywgJzUwLjAwJScsICc2Ni42NiUnLCAnNzUuMDAlJywgJzEwMC4wMCUnXSxcclxuXHRcdFx0XHQkZWwgPSAkKHRoaXMpLFxyXG5cdFx0XHRcdCRjb2x1bW4gPSAkZWwuY2xvc2VzdCgnLm1lbnUtaXRlbS1jb250YWluZXInKSxcclxuXHRcdFx0XHR3aWR0aCA9ICRjb2x1bW4uZGF0YSgnd2lkdGgnKSxcclxuXHRcdFx0XHRjdXJyZW50ID0gXy5pbmRleE9mKHN0ZXBzLCB3aWR0aCksXHJcblx0XHRcdFx0bmV4dDtcclxuXHJcblx0XHRcdGlmICgtMSA9PT0gY3VycmVudCkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCRlbC5oYXNDbGFzcygnc3VibWVudS1iaWdnZXInKSkge1xyXG5cdFx0XHRcdG5leHQgPSBjdXJyZW50ID09PSBzdGVwcy5sZW5ndGggPyBjdXJyZW50IDogY3VycmVudCArIDE7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0bmV4dCA9IGN1cnJlbnQgPT09IDAgPyBjdXJyZW50IDogY3VycmVudCAtIDE7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdCRjb2x1bW5bMF0uc3R5bGUud2lkdGggPSBzdGVwc1tuZXh0XTtcclxuXHRcdFx0JGNvbHVtbi5kYXRhKCd3aWR0aCcsIHN0ZXBzW25leHRdKTtcclxuXHRcdFx0JGNvbHVtbi5maW5kKCcubWVudS1pdGVtLWhhbmRsZSAubWVudS1pdGVtLXdpZHRoJykudmFsKHN0ZXBzW25leHRdKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0aW5pdE1lZ2FDb2x1bW5zOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHZhciAkY29sdW1ucyA9IG9wdGlvbnMuJG1vZGFsLmZpbmQoJyNpbnNpZGUtbWVnYSAubWVudS1pdGVtLWNvbnRhaW5lcicpLFxyXG5cdFx0XHRcdGRlZmF1bHRXaWR0aCA9ICcyNS4wMCUnO1xyXG5cclxuXHRcdFx0aWYgKCEkY29sdW1ucy5sZW5ndGgpIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFN1cHBvcnQgbWF4aW11bSA0IGNvbHVtbnNcclxuXHRcdFx0aWYgKCRjb2x1bW5zLmxlbmd0aCA8IDQpIHtcclxuXHRcdFx0XHRkZWZhdWx0V2lkdGggPSBTdHJpbmcoKCAxMDAgLyAkY29sdW1ucy5sZW5ndGggKS50b0ZpeGVkKDIpKSArICclJztcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Xy5lYWNoKCRjb2x1bW5zLCBmdW5jdGlvbiAoY29sdW1uKSB7XHJcblx0XHRcdFx0dmFyIHdpZHRoID0gY29sdW1uLmRhdGFzZXQud2lkdGg7XHJcblxyXG5cdFx0XHRcdHdpZHRoID0gd2lkdGggfHwgZGVmYXVsdFdpZHRoO1xyXG5cclxuXHRcdFx0XHRjb2x1bW4uc3R5bGUud2lkdGggPSB3aWR0aDtcclxuXHRcdFx0XHRjb2x1bW4uZGF0YXNldC53aWR0aCA9IHdpZHRoO1xyXG5cdFx0XHRcdCQoY29sdW1uKS5maW5kKCcubWVudS1pdGVtLWhhbmRsZSAubWVudS1pdGVtLXdpZHRoJykudmFsKHdpZHRoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGluaXRCYWNrZ3JvdW5kRmllbGRzOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdG9wdGlvbnMuJG1vZGFsLmZpbmQoJy5iYWNrZ3JvdW5kLWNvbG9yLXBpY2tlcicpLndwQ29sb3JQaWNrZXIoKTtcclxuXHJcblx0XHRcdC8vIEJhY2tncm91bmQgaW1hZ2VcclxuXHRcdFx0b3B0aW9ucy4kbW9kYWwub24oJ2NsaWNrJywgJy5pdGVtLW1lZGlhIC51cGxvYWQtYnV0dG9uJywgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHRcdHZhciAkZWwgPSAkKHRoaXMpO1xyXG5cclxuXHRcdFx0XHQvLyBSZW1vdmUgYWxsIGF0dGFjaGVkICdzZWxlY3QnIGV2ZW50XHJcblx0XHRcdFx0b3B0aW9ucy5mcmFtZS5vZmYoJ3NlbGVjdCcpO1xyXG5cclxuXHRcdFx0XHQvLyBVcGRhdGUgaW5wdXRzIHdoZW4gc2VsZWN0IGltYWdlXHJcblx0XHRcdFx0b3B0aW9ucy5mcmFtZS5vbignc2VsZWN0JywgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0Ly8gVXBkYXRlIGlucHV0IHZhbHVlIGZvciBzaW5nbGUgaW1hZ2Ugc2VsZWN0aW9uXHJcblx0XHRcdFx0XHR2YXIgdXJsID0gb3B0aW9ucy5mcmFtZS5zdGF0ZSgpLmdldCgnc2VsZWN0aW9uJykuZmlyc3QoKS50b0pTT04oKS51cmw7XHJcblxyXG5cdFx0XHRcdFx0JGVsLnNpYmxpbmdzKCcudGh1bWJuYWlsLWltYWdlJykuaHRtbCgnPGltZyBzcmM9XCInICsgdXJsICsgJ1wiPicpO1xyXG5cdFx0XHRcdFx0JGVsLnNpYmxpbmdzKCdpbnB1dCcpLnZhbCh1cmwpO1xyXG5cdFx0XHRcdFx0JGVsLmFkZENsYXNzKCdoaWRkZW4nKTtcclxuXHRcdFx0XHRcdCRlbC5zaWJsaW5ncygnLnJlbW92ZS1idXR0b24nKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdG9wdGlvbnMuZnJhbWUub3BlbigpO1xyXG5cdFx0XHR9KS5vbignY2xpY2snLCAnLml0ZW0tbWVkaWEgLnJlbW92ZS1idXR0b24nLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRcdFx0dmFyICRlbCA9ICQodGhpcyk7XHJcblxyXG5cdFx0XHRcdCRlbC5zaWJsaW5ncygnLnRodW1ibmFpbC1pbWFnZScpLmh0bWwoJycpO1xyXG5cdFx0XHRcdCRlbC5zaWJsaW5ncygnaW5wdXQnKS52YWwoJycpO1xyXG5cdFx0XHRcdCRlbC5hZGRDbGFzcygnaGlkZGVuJyk7XHJcblx0XHRcdFx0JGVsLnNpYmxpbmdzKCcudXBsb2FkLWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBJbWFnZSB0eXBlXHJcblx0XHRcdG9wdGlvbnMuJG1vZGFsLm9uKCdjaGFuZ2UnLCAnLmltYWdlLXNpemUgc2VsZWN0JywgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdHZhciAkZWwgPSAkKHRoaXMpLFxyXG5cdFx0XHRcdFx0JGNvbnRhaW5lciA9ICRlbC5wYXJlbnRzKCcuaW5zaWRlLWJhY2tncm91bmQnKTtcclxuXHJcblx0XHRcdFx0aWYgKCdiYWNrZ3JvdW5kJyA9PSAkZWwudmFsKCkpIHtcclxuXHRcdFx0XHRcdCRjb250YWluZXIuZmluZCgnLmJhY2tncm91bmQtcG9zaXRpb24sIC5iYWNrZ3JvdW5kLXJlcGVhdCwgLmJhY2tncm91bmQtc2l6ZScpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuXHRcdFx0XHRcdCRjb250YWluZXIuZmluZCgnLmltYWdlLXBvc2l0aW9uLCAuaW1hZ2UtbWFyZ2luJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQkY29udGFpbmVyLmZpbmQoJy5iYWNrZ3JvdW5kLXBvc2l0aW9uLCAuYmFja2dyb3VuZC1yZXBlYXQsIC5iYWNrZ3JvdW5kLXNpemUnKS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcblx0XHRcdFx0XHQkY29udGFpbmVyLmZpbmQoJy5pbWFnZS1wb3NpdGlvbiwgLmltYWdlLW1hcmdpbicpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRpbml0SWNvbkZpZWxkczogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHR2YXIgJGlucHV0ID0gb3B0aW9ucy4kbW9kYWwuZmluZCgnI3BwLWljb24taW5wdXQnKSxcclxuXHRcdFx0XHQkcHJldmlldyA9IG9wdGlvbnMuJG1vZGFsLmZpbmQoJy5wcC1pY29uLXNlbGVjdG9yIC5zZWxlY3RlZC1pY29uJyksXHJcblx0XHRcdFx0JGljb25zID0gb3B0aW9ucy4kbW9kYWwuZmluZCgnLnBwLWljb24tc2VsZWN0b3IgLmljb25zLWNvbnRlbnQgaScpO1xyXG5cclxuXHRcdFx0Ly8gU2VsZWN0IGFuIGljb25cclxuXHRcdFx0b3B0aW9ucy4kbW9kYWwub24oJ2NsaWNrJywgJy5wcC1pY29uLXNlbGVjdG9yIC5pY29ucy1jb250ZW50IHNwYW4nLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0dmFyICRlbCA9ICQodGhpcyksXHJcblx0XHRcdFx0XHRpY29uID0gJGVsLmZpbmQoJ2knKS5kYXRhKCdpY29uJyk7XHJcblxyXG5cdFx0XHRcdCQoJy5wcC1pY29uLXNlbGVjdG9yIC5pY29ucy1jb250ZW50IHNwYW4uYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cdFx0XHRcdCRlbC5hZGRDbGFzcygnYWN0aXZlJyk7XHJcblxyXG5cdFx0XHRcdCRpbnB1dC52YWwoaWNvbik7XHJcblx0XHRcdFx0JHByZXZpZXcuaHRtbCgnPGkgY2xhc3M9XCInICsgaWNvbiArICdcIj48L2k+Jyk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gRGVsZXRlIHRoZSBzZWxlY3RlZCBpY29uXHJcblx0XHRcdG9wdGlvbnMuJG1vZGFsLm9uKCdjbGljaycsICcucHAtaWNvbi1zZWxlY3RvciAucmVtb3ZlLWljb24nLCBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0JHByZXZpZXcuaHRtbCgnJyk7XHJcblx0XHRcdFx0JGlucHV0LnZhbCgnJyk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gVGFiIGljb25zXHJcblx0XHRcdG9wdGlvbnMuJG1vZGFsLm9uKCdjbGljaycsICcucHAtaWNvbi1zZWxlY3RvciAuaWNvbnMtdGFiJywgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdHZhciAkZWwgPSAkKHRoaXMpLFxyXG5cdFx0XHRcdFx0JHRhcmdldCA9ICQoJy5wcC1pY29uLXNlbGVjdG9yIC5pY29ucy1jb250ZW50LicgKyAkZWwuZGF0YSgndGFiJykgKTtcclxuXHJcblx0XHRcdFx0aWYgKCEkZWwuaGFzQ2xhc3MoJ2FjdGl2ZScpKXtcclxuXHRcdFx0XHRcdCRlbC5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoJy5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblx0XHRcdFx0XHQkdGFyZ2V0LmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygnLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gU2VhcmNoIGZvciBpY29uc1xyXG5cdFx0XHRvcHRpb25zLiRtb2RhbC5vbigna2V5dXAnLCAnLnBwLWljb24tc2VhcmNoJywgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0XHR2YXIgdGVybSA9ICQodGhpcykudmFsKCkudG9VcHBlckNhc2UoKSxcclxuXHRcdFx0XHRcdCRpY29uQ29udGFpbmVyID0gJGljb25zLnBhcmVudCgpO1xyXG5cclxuXHRcdFx0XHRpZiAoIXRlcm0pIHtcclxuXHRcdFx0XHRcdCRpY29uQ29udGFpbmVyLnNob3coKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JGljb25Db250YWluZXIuaGlkZSgpLmZpbHRlcihmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiAkKHRoaXMpLmZpbmQoJ2knKS5kYXRhKCdpY29uJykudG9VcHBlckNhc2UoKS5pbmRleE9mKHRlcm0pID4gLTE7XHJcblx0XHRcdFx0XHR9KS5zaG93KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Z2V0SXRlbURhdGE6IGZ1bmN0aW9uIChtZW51SXRlbSkge1xyXG5cdFx0XHR2YXIgJG1lbnVJdGVtID0gJChtZW51SXRlbSkuY2xvc2VzdCgnbGkubWVudS1pdGVtJyksXHJcblx0XHRcdFx0JG1lbnVEYXRhID0gJG1lbnVJdGVtLmZpbmQoJy5wcC1kYXRhJyksXHJcblx0XHRcdFx0Y2hpbGRyZW4gPSAkbWVudUl0ZW0uY2hpbGRNZW51SXRlbXMoKTtcclxuXHJcblx0XHRcdG9wdGlvbnMuaXRlbURhdGEgPSB7XHJcblx0XHRcdFx0ZGVwdGggICAgICAgICAgOiAkbWVudUl0ZW0ubWVudUl0ZW1EZXB0aCgpLFxyXG5cdFx0XHRcdG1lZ2FEYXRhICAgICAgIDoge1xyXG5cdFx0XHRcdFx0bWVnYSAgICAgICAgIFx0XHQ6ICRtZW51RGF0YS5kYXRhKCdtZWdhJyksXHJcblx0XHRcdFx0XHRtZWdhX3dpZHRoICAgXHRcdDogJG1lbnVEYXRhLmRhdGEoJ21lZ2Ffd2lkdGgnKSxcclxuXHRcdFx0XHRcdHdpZHRoICAgICAgICBcdFx0OiAkbWVudURhdGEuZGF0YSgnd2lkdGgnKSxcclxuXHRcdFx0XHRcdGJhY2tncm91bmQgICBcdFx0OiAkbWVudURhdGEuZGF0YSgnYmFja2dyb3VuZCcpLFxyXG5cdFx0XHRcdFx0aW1nX3R5cGVcdFx0XHQ6ICRtZW51RGF0YS5kYXRhKCdpbWdfdHlwZScpLFxyXG5cdFx0XHRcdFx0aW1nX3NpemVcdFx0XHQ6ICRtZW51RGF0YS5kYXRhKCdpbWdfc2l6ZScpLFxyXG5cdFx0XHRcdFx0aW1nX3Bvc1x0XHRcdFx0OiAkbWVudURhdGEuZGF0YSgnaW1nX3BvcycpLFxyXG5cdFx0XHRcdFx0aW1nX25vX21hcmdpbiAgXHRcdDogJG1lbnVEYXRhLmRhdGEoJ2ltZ19ub19tYXJnaW4nKSxcclxuXHRcdFx0XHRcdGljb24gICAgICAgICBcdFx0OiAkbWVudURhdGEuZGF0YSgnaWNvbicpLFxyXG5cdFx0XHRcdFx0aWNvbl9wb3MgICAgICAgXHRcdDogJG1lbnVEYXRhLmRhdGEoJ2ljb25fcG9zJyksXHJcblx0XHRcdFx0XHRoaWRlX3RleHQgICAgIFx0XHQ6ICRtZW51RGF0YS5kYXRhKCdoaWRlX3RleHQnKSxcclxuXHRcdFx0XHRcdGhpZGVfZGVza3RvcCAgXHRcdDogJG1lbnVEYXRhLmRhdGEoJ2hpZGVfZGVza3RvcCcpLFxyXG5cdFx0XHRcdFx0aGlkZV9tb2JpbGUgICBcdFx0OiAkbWVudURhdGEuZGF0YSgnaGlkZV9tb2JpbGUnKSxcclxuXHRcdFx0XHRcdGhpZGVfaW1nX2Rlc2t0b3AgIFx0OiAkbWVudURhdGEuZGF0YSgnaGlkZV9pbWdfZGVza3RvcCcpLFxyXG5cdFx0XHRcdFx0aGlkZV9pbWdfbW9iaWxlICBcdDogJG1lbnVEYXRhLmRhdGEoJ2hpZGVfaW1nX21vYmlsZScpLFxyXG5cdFx0XHRcdFx0aG90ICAgICAgICAgIFx0XHQ6ICRtZW51RGF0YS5kYXRhKCdob3QnKSxcclxuXHRcdFx0XHRcdHVwcGVyY2FzZV90ZXh0XHRcdDogJG1lbnVEYXRhLmRhdGEoJ3VwcGVyY2FzZV90ZXh0JyksXHJcblx0XHRcdFx0XHRuZXcgICAgICAgICAgXHRcdDogJG1lbnVEYXRhLmRhdGEoJ25ldycpLFxyXG5cdFx0XHRcdFx0dHJlbmRpbmcgICAgIFx0XHQ6ICRtZW51RGF0YS5kYXRhKCd0cmVuZGluZycpLFxyXG5cdFx0XHRcdFx0c2FsZSAgICAgXHRcdFx0OiAkbWVudURhdGEuZGF0YSgnc2FsZScpLFxyXG5cdFx0XHRcdFx0ZGlzYWJsZV9saW5rICBcdFx0OiAkbWVudURhdGEuZGF0YSgnZGlzYWJsZV9saW5rJyksXHJcblx0XHRcdFx0XHRjb250ZW50ICAgICAgXHRcdDogJG1lbnVEYXRhLmh0bWwoKVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0ZGF0YSAgICAgICAgICAgOiAkbWVudUl0ZW0uZ2V0SXRlbURhdGEoKSxcclxuXHRcdFx0XHRjaGlsZHJlbiAgICAgICA6IFtdLFxyXG5cdFx0XHRcdG9yaWdpbmFsRWxlbWVudDogJG1lbnVJdGVtLmdldCgwKVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0aWYgKCFfLmlzRW1wdHkoY2hpbGRyZW4pKSB7XHJcblx0XHRcdFx0Xy5lYWNoKGNoaWxkcmVuLCBmdW5jdGlvbiAoaXRlbSkge1xyXG5cdFx0XHRcdFx0dmFyICRpdGVtID0gJChpdGVtKSxcclxuXHRcdFx0XHRcdFx0JGl0ZW1EYXRhID0gJGl0ZW0uZmluZCgnLnBwLWRhdGEnKSxcclxuXHRcdFx0XHRcdFx0ZGVwdGggPSAkaXRlbS5tZW51SXRlbURlcHRoKCk7XHJcblxyXG5cdFx0XHRcdFx0b3B0aW9ucy5pdGVtRGF0YS5jaGlsZHJlbi5wdXNoKHtcclxuXHRcdFx0XHRcdFx0ZGVwdGggICAgICAgICAgOiBkZXB0aCxcclxuXHRcdFx0XHRcdFx0c3ViRGVwdGggICAgICAgOiBkZXB0aCAtIG9wdGlvbnMuaXRlbURhdGEuZGVwdGggLSAxLFxyXG5cdFx0XHRcdFx0XHRkYXRhICAgICAgICAgICA6ICRpdGVtLmdldEl0ZW1EYXRhKCksXHJcblx0XHRcdFx0XHRcdG1lZ2FEYXRhICAgICAgIDoge1xyXG5cdFx0XHRcdFx0XHRcdG1lZ2EgICAgICAgICBcdFx0OiAkaXRlbURhdGEuZGF0YSgnbWVnYScpLFxyXG5cdFx0XHRcdFx0XHRcdG1lZ2Ffd2lkdGggICBcdFx0OiAkaXRlbURhdGEuZGF0YSgnbWVnYV93aWR0aCcpLFxyXG5cdFx0XHRcdFx0XHRcdHdpZHRoICAgICAgICBcdFx0OiAkaXRlbURhdGEuZGF0YSgnd2lkdGgnKSxcclxuXHRcdFx0XHRcdFx0XHRiYWNrZ3JvdW5kICAgXHRcdDogJGl0ZW1EYXRhLmRhdGEoJ2JhY2tncm91bmQnKSxcclxuXHRcdFx0XHRcdFx0XHRpbWdfdHlwZVx0XHQgICBcdDogJGl0ZW1EYXRhLmRhdGEoJ2ltZ190eXBlJyksXHJcblx0XHRcdFx0XHRcdFx0aW1nX3NpemVcdFx0ICAgXHQ6ICRpdGVtRGF0YS5kYXRhKCdpbWdfc2l6ZScpLFxyXG5cdFx0XHRcdFx0XHRcdGltZ19wb3NcdFx0ICAgXHRcdDogJGl0ZW1EYXRhLmRhdGEoJ2ltZ19wb3MnKSxcclxuXHRcdFx0XHRcdFx0XHRpbWdfbm9fbWFyZ2luICBcdFx0OiAkaXRlbURhdGEuZGF0YSgnaW1nX25vX21hcmdpbicpLFxyXG5cdFx0XHRcdFx0XHRcdGljb24gICAgICAgICBcdFx0OiAkaXRlbURhdGEuZGF0YSgnaWNvbicpLFxyXG5cdFx0XHRcdFx0XHRcdGljb25fcG9zICAgICAgIFx0XHQ6ICRpdGVtRGF0YS5kYXRhKCdpY29uX3BvcycpLFxyXG5cdFx0XHRcdFx0XHRcdGhpZGVfdGV4dCAgICAgXHRcdDogJGl0ZW1EYXRhLmRhdGEoJ2hpZGVfdGV4dCcpLFxyXG5cdFx0XHRcdFx0XHRcdGhpZGVfZGVza3RvcCAgXHRcdDogJGl0ZW1EYXRhLmRhdGEoJ2hpZGVfZGVza3RvcCcpLFxyXG5cdFx0XHRcdFx0XHRcdGhpZGVfbW9iaWxlICAgXHRcdDogJGl0ZW1EYXRhLmRhdGEoJ2hpZGVfbW9iaWxlJyksXHJcblx0XHRcdFx0XHRcdFx0aGlkZV9pbWdfZGVza3RvcCBcdDogJGl0ZW1EYXRhLmRhdGEoJ2hpZGVfaW1nX2Rlc2t0b3AnKSxcclxuXHRcdFx0XHRcdFx0XHRoaWRlX2ltZ19tb2JpbGUgICBcdDogJGl0ZW1EYXRhLmRhdGEoJ2hpZGVfaW1nX21vYmlsZScpLFxyXG5cdFx0XHRcdFx0XHRcdGhvdCAgICAgICAgICBcdFx0OiAkaXRlbURhdGEuZGF0YSgnaG90JyksXHJcblx0XHRcdFx0XHRcdFx0dXBwZXJjYXNlX3RleHRcdFx0OiAkaXRlbURhdGEuZGF0YSgndXBwZXJjYXNlX3RleHQnKSxcclxuXHRcdFx0XHRcdFx0XHRuZXcgICAgICAgICAgXHRcdDogJGl0ZW1EYXRhLmRhdGEoJ25ldycpLFxyXG5cdFx0XHRcdFx0XHRcdHRyZW5kaW5nICAgICBcdFx0OiAkaXRlbURhdGEuZGF0YSgndHJlbmRpbmcnKSxcclxuXHRcdFx0XHRcdFx0XHRzYWxlICAgICBcdFx0XHQ6ICRpdGVtRGF0YS5kYXRhKCdzYWxlJyksXHJcblx0XHRcdFx0XHRcdFx0ZGlzYWJsZV9saW5rICBcdFx0OiAkaXRlbURhdGEuZGF0YSgnZGlzYWJsZV9saW5rJyksXHJcblx0XHRcdFx0XHRcdFx0Y29udGVudCAgICAgIFx0XHQ6ICRpdGVtRGF0YS5odG1sKClcclxuXHRcdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdFx0b3JpZ2luYWxFbGVtZW50OiBpdGVtXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0c2V0SXRlbURhdGE6IGZ1bmN0aW9uIChpdGVtLCBkYXRhLCBkZXB0aCkge1xyXG5cdFx0XHR2YXIgY2hlY2tib3hlcyA9IFsnbWVnYScsICdoaWRlX3RleHQnLCAndXBwZXJjYXNlX3RleHQnLCAnZGlzYWJsZV9saW5rJywgJ2ltZ19ub19tYXJnaW4nLCAnaGlkZV9kZXNrdG9wJywgJ2hpZGVfbW9iaWxlJywgJ2hvdCcsICduZXcnLCAndHJlbmRpbmcnLCAnc2FsZScsICdoaWRlX2ltZ19kZXNrdG9wJywgJ2hpZGVfaW1nX21vYmlsZSddO1xyXG5cclxuXHRcdFx0Ly8gU2V0IHRoZSBjaGVja2JveGVzIHRvIGZhbHNlIGlmIGRvZXMgbm90IGV4aXN0IGluIHRoZSBkYXRhXHJcblx0XHRcdCQuZWFjaChjaGVja2JveGVzLCBmdW5jdGlvbihpbmRleCwgdmFsdWUpe1xyXG5cdFx0XHRcdGlmICghXy5oYXMoZGF0YSwgdmFsdWUpKSB7XHJcblx0XHRcdFx0XHRkYXRhW3ZhbHVlXSA9IGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR2YXIgJGRhdGFIb2xkZXIgPSAkKGl0ZW0pLmZpbmQoJy5wcC1kYXRhJyk7XHJcblxyXG5cdFx0XHRpZiAoXy5oYXMoZGF0YSwgJ2NvbnRlbnQnKSkge1xyXG5cdFx0XHRcdCRkYXRhSG9sZGVyLmh0bWwoZGF0YS5jb250ZW50KTtcclxuXHRcdFx0XHRkZWxldGUgZGF0YS5jb250ZW50O1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQkZGF0YUhvbGRlci5kYXRhKGRhdGEpO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0Z2V0RmllbGROYW1lOiBmdW5jdGlvbiAobmFtZSwgaWQpIHtcclxuXHRcdFx0bmFtZSA9IG5hbWUuc3BsaXQoJy4nKTtcclxuXHRcdFx0bmFtZSA9ICdbJyArIG5hbWUuam9pbignXVsnKSArICddJztcclxuXHJcblx0XHRcdHJldHVybiAnbWVudS1pdGVtWycgKyBpZCArICddJyArIG5hbWU7XHJcblx0XHR9LFxyXG5cclxuXHRcdHNhdmVDaGFuZ2VzOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHZhciBkYXRhID0gb3B0aW9ucy4kbW9kYWwuZmluZCgnLnBwLW1lbnUtaXRlbS10YWItY29udGVudCA6aW5wdXQnKS5zZXJpYWxpemUoKSxcclxuXHRcdFx0XHQkc3Bpbm5lciA9IG9wdGlvbnMuJG1vZGFsLmZpbmQoJy5wcC1tZWdhLW1lbnUtaXRlbS1jb250cm9scyAuc3Bpbm5lcicpO1xyXG5cclxuXHRcdFx0JHNwaW5uZXIuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG5cclxuXHRcdFx0JC5wb3N0KGFqYXh1cmwsIHtcclxuXHRcdFx0XHRhY3Rpb246ICdwcF9zYXZlX21lbnVfaXRlbV9kYXRhJyxcclxuXHRcdFx0XHRkYXRhICA6IGRhdGFcclxuXHRcdFx0fSwgZnVuY3Rpb24gKHJlcykge1xyXG5cdFx0XHRcdGlmICghcmVzLnN1Y2Nlc3MpIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHZhciBkYXRhID0gcmVzLmRhdGFbJ21lbnUtaXRlbSddO1xyXG5cclxuXHRcdFx0XHQvLyBVcGRhdGUgcGFyZW50IG1lbnUgaXRlbVxyXG5cdFx0XHRcdGlmIChfLmhhcyhkYXRhLCBvcHRpb25zLml0ZW1EYXRhLmRhdGFbJ21lbnUtaXRlbS1kYi1pZCddKSkge1xyXG5cdFx0XHRcdFx0b3B0aW9ucy5zZXRJdGVtRGF0YShvcHRpb25zLml0ZW1EYXRhLm9yaWdpbmFsRWxlbWVudCwgZGF0YVtvcHRpb25zLml0ZW1EYXRhLmRhdGFbJ21lbnUtaXRlbS1kYi1pZCddXSwgMCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRfLmVhY2gob3B0aW9ucy5pdGVtRGF0YS5jaGlsZHJlbiwgZnVuY3Rpb24gKG1lbnVJdGVtKSB7XHJcblx0XHRcdFx0XHRpZiAoIV8uaGFzKGRhdGEsIG1lbnVJdGVtLmRhdGFbJ21lbnUtaXRlbS1kYi1pZCddKSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0b3B0aW9ucy5zZXRJdGVtRGF0YShtZW51SXRlbS5vcmlnaW5hbEVsZW1lbnQsIGRhdGFbbWVudUl0ZW0uZGF0YVsnbWVudS1pdGVtLWRiLWlkJ11dLCAxKTtcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0JHNwaW5uZXIucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG5cdFx0XHRcdG9wdGlvbnMuY2xvc2VNb2RhbCgpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQkKGZ1bmN0aW9uICgpIHtcclxuXHRcdG1lbnVTZXR0aW5ncy5pbml0KCk7XHJcblx0fSk7XHJcbn0pKGpRdWVyeSwgXyk7XHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
