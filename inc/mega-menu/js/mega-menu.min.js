var menuSettings;!function(e,t){"use strict";var a;a=menuSettings={init:function(){a.$body=e("body"),a.$modal=e("#menu-modal"),a.$primaryCheckbox=e("#locations-primary_navigation"),a.itemData={},a.templates={menus:t.template(e("#pp-tmpl-menus").html()),title:t.template(e("#pp-tmpl-title").html()),mega:t.template(e("#pp-tmpl-mega").html()),background:t.template(e("#pp-tmpl-background").html()),icon:t.template(e("#pp-tmpl-icon").html()),content:t.template(e("#pp-tmpl-content").html()),general:t.template(e("#pp-tmpl-general").html())},a.frame=wp.media({library:{type:"image"}}),this.initActions()},initActions:function(){a.$body.on("click",".opensettings",this.openModal).on("click",".mega-modal-backdrop, .mega-modal-close, .pp-button-cancel",this.closeModal),a.$modal.on("click",".pp-mega-menu-item-setting-tab a",this.switchPanel).on("click",".item-controls span",this.resizeMegaColumn).on("click",".pp-button-save",this.saveChanges),a.$primaryCheckbox.on("change",function(){e(this).is(":checked")?a.$body.removeClass("hide-settings"):a.$body.addClass("hide-settings")}),a.$primaryCheckbox.is(":checked")?a.$body.removeClass("hide-settings"):a.$body.addClass("hide-settings")},openModal:function(){return a.getItemData(this),a.$modal.show(),a.$body.addClass("modal-open"),a.render(this),!1},closeModal:function(){return a.$modal.hide().find(".pp-menu-item-tab-content").html(""),a.$body.removeClass("modal-open"),!1},switchPanel:function(t){t.preventDefault();var i=e(this).parent(),n=i.data("panel");i.addClass("active-item-setting-tab").siblings(".active-item-setting-tab").removeClass("active-item-setting-tab"),a.openSettings(n)},render:function(t){var i=this;a.$modal.find(".pp-mega-menu-item-setting-tabs").html(a.templates.menus(a.itemData));var n=a.$modal.find(".pp-mega-menu-item-setting-tabs .pp-mega-menu-to-content"),d=e(t).parents(".menu-item-settings").find("input.edit-menu-item-title").val();a.$modal.find(".pp-mega-menu-item-header-bar").html(a.templates.title({title:d})),n.each(function(){i.openSettings(e(this).data("panel"))})},openSettings:function(e){var t=a.$modal.find(".pp-menu-item-tab-content"),i=t.children("#inside-"+e);if(i.length)i.addClass("active").siblings().removeClass("active");else{var n=a.$modal.find(".pp-mega-menu-item-setting-tabs .pp-mega-menu-to-content[data-panel="+e+"]");t.append(a.templates[e](a.itemData)),n.hasClass("active-item-setting-tab")&&t.children("#inside-"+e).addClass("active").siblings().removeClass("active"),"mega"==e&&a.initMegaColumns(),"background"==e&&a.initBackgroundFields(),"icon"==e&&a.initIconFields()}},resizeMegaColumn:function(a){a.preventDefault();var i,n=["20.00%","25.00%","33.33%","50.00%","66.66%","75.00%","100.00%"],d=e(this),o=d.closest(".menu-item-container"),s=o.data("width"),m=t.indexOf(n,s);-1!==m&&(i=d.hasClass("submenu-bigger")?m==n.length?m:m+1:0==m?m:m-1,o[0].style.width=n[i],o.data("width",n[i]),o.find(".menu-item-handle .menu-item-width").val(n[i]))},initMegaColumns:function(){var i=a.$modal.find("#inside-mega .menu-item-container"),n="25.00%";i.length&&(i.length<4&&(n=String((100/i.length).toFixed(2))+"%"),t.each(i,function(t){var a=t.dataset.width;a=a||n,t.style.width=a,t.dataset.width=a,e(t).find(".menu-item-handle .menu-item-width").val(a)}))},initBackgroundFields:function(){a.$modal.find(".background-color-picker").wpColorPicker(),a.$modal.on("click",".item-media .upload-button",function(t){t.preventDefault();var i=e(this);a.frame.off("select"),a.frame.on("select",function(){var e=a.frame.state().get("selection").first().toJSON().url;i.siblings(".thumbnail-image").html('<img src="'+e+'">'),i.siblings("input").val(e),i.addClass("hidden"),i.siblings(".remove-button").removeClass("hidden")}),a.frame.open()}).on("click",".item-media .remove-button",function(t){t.preventDefault();var a=e(this);a.siblings(".thumbnail-image").html(""),a.siblings("input").val(""),a.addClass("hidden"),a.siblings(".upload-button").removeClass("hidden")}),a.$modal.on("change",".image-size select",function(){var t=e(this),a=t.parents(".inside-background");"background"==t.val()?(a.find(".background-position, .background-repeat, .background-size").removeClass("hidden"),a.find(".image-position, .image-margin").addClass("hidden")):(a.find(".background-position, .background-repeat, .background-size").addClass("hidden"),a.find(".image-position, .image-margin").removeClass("hidden"))})},initIconFields:function(){var t=a.$modal.find("#pp-icon-input"),i=a.$modal.find(".pp-icon-selector .selected-icon"),n=a.$modal.find(".pp-icon-selector .icons-content i");a.$modal.on("click",".pp-icon-selector .icons-content span",function(){var a=e(this),n=a.find("i").data("icon");e(".pp-icon-selector .icons-content span.active").removeClass("active"),a.addClass("active"),t.val(n),i.html('<i class="'+n+'"></i>')}),a.$modal.on("click",".pp-icon-selector .remove-icon",function(){i.html(""),t.val("")}),a.$modal.on("click",".pp-icon-selector .icons-tab",function(){var t=e(this),a=e(".pp-icon-selector .icons-content."+t.data("tab"));t.hasClass("active")||(t.addClass("active").siblings(".active").removeClass("active"),a.addClass("active").siblings(".active").removeClass("active"))}),a.$modal.on("keyup",".pp-icon-search",function(t){var a=e(this).val().toUpperCase(),i=n.parent();a?i.hide().filter(function(){return e(this).find("i").data("icon").toUpperCase().indexOf(a)>-1}).show():i.show()})},getItemData:function(i){var n=e(i).closest("li.menu-item"),d=n.find(".pp-data"),o=n.childMenuItems();a.itemData={depth:n.menuItemDepth(),megaData:{mega:d.data("mega"),mega_width:d.data("mega_width"),width:d.data("width"),background:d.data("background"),img_type:d.data("img_type"),img_size:d.data("img_size"),img_pos:d.data("img_pos"),img_no_margin:d.data("img_no_margin"),icon:d.data("icon"),icon_pos:d.data("icon_pos"),hide_text:d.data("hide_text"),hide_desktop:d.data("hide_desktop"),hide_mobile:d.data("hide_mobile"),hide_img_desktop:d.data("hide_img_desktop"),hide_img_mobile:d.data("hide_img_mobile"),hot:d.data("hot"),uppercase_text:d.data("uppercase_text"),new:d.data("new"),trending:d.data("trending"),sale:d.data("sale"),disable_link:d.data("disable_link"),content:d.html()},data:n.getItemData(),children:[],originalElement:n.get(0)},t.isEmpty(o)||t.each(o,function(t){var i=e(t),n=i.find(".pp-data"),d=i.menuItemDepth();a.itemData.children.push({depth:d,subDepth:d-a.itemData.depth-1,data:i.getItemData(),megaData:{mega:n.data("mega"),mega_width:n.data("mega_width"),width:n.data("width"),background:n.data("background"),img_type:n.data("img_type"),img_size:n.data("img_size"),img_pos:n.data("img_pos"),img_no_margin:n.data("img_no_margin"),icon:n.data("icon"),icon_pos:n.data("icon_pos"),hide_text:n.data("hide_text"),hide_desktop:n.data("hide_desktop"),hide_mobile:n.data("hide_mobile"),hide_img_desktop:n.data("hide_img_desktop"),hide_img_mobile:n.data("hide_img_mobile"),hot:n.data("hot"),uppercase_text:n.data("uppercase_text"),new:n.data("new"),trending:n.data("trending"),sale:n.data("sale"),disable_link:n.data("disable_link"),content:n.html()},originalElement:t})})},setItemData:function(a,i,n){var d=["mega","hide_text","uppercase_text","disable_link","img_no_margin","hide_desktop","hide_mobile","hot","new","trending","sale","hide_img_desktop","hide_img_mobile"];e.each(d,function(e,a){t.has(i,a)||(i[a]=!1)});var o=e(a).find(".pp-data");t.has(i,"content")&&(o.html(i.content),delete i.content),o.data(i)},getFieldName:function(e,t){return e=e.split("."),e="["+e.join("][")+"]","menu-item["+t+"]"+e},saveChanges:function(){var i=a.$modal.find(".pp-menu-item-tab-content :input").serialize(),n=a.$modal.find(".pp-mega-menu-item-controls .spinner");return n.addClass("is-active"),e.post(ajaxurl,{action:"pp_save_menu_item_data",data:i},function(e){if(e.success){var i=e.data["menu-item"];t.has(i,a.itemData.data["menu-item-db-id"])&&a.setItemData(a.itemData.originalElement,i[a.itemData.data["menu-item-db-id"]],0),t.each(a.itemData.children,function(e){t.has(i,e.data["menu-item-db-id"])&&a.setItemData(e.originalElement,i[e.data["menu-item-db-id"]],1)}),n.removeClass("is-active"),a.closeModal()}}),!1}},e(function(){menuSettings.init()})}(jQuery,_);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lZ2EtbWVudS5qcyJdLCJuYW1lcyI6WyJtZW51U2V0dGluZ3MiLCIkIiwiXyIsIm9wdGlvbnMiLCJpbml0IiwiJGJvZHkiLCIkbW9kYWwiLCIkcHJpbWFyeUNoZWNrYm94IiwiaXRlbURhdGEiLCJ0ZW1wbGF0ZXMiLCJtZW51cyIsInRlbXBsYXRlIiwiaHRtbCIsInRpdGxlIiwibWVnYSIsImJhY2tncm91bmQiLCJpY29uIiwiY29udGVudCIsImdlbmVyYWwiLCJmcmFtZSIsIndwIiwibWVkaWEiLCJsaWJyYXJ5IiwidHlwZSIsInRoaXMiLCJpbml0QWN0aW9ucyIsIm9uIiwib3Blbk1vZGFsIiwiY2xvc2VNb2RhbCIsInN3aXRjaFBhbmVsIiwicmVzaXplTWVnYUNvbHVtbiIsInNhdmVDaGFuZ2VzIiwiaXMiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiZ2V0SXRlbURhdGEiLCJzaG93IiwicmVuZGVyIiwiaGlkZSIsImZpbmQiLCJlIiwicHJldmVudERlZmF1bHQiLCIkZWwiLCJwYXJlbnQiLCJwYW5lbCIsImRhdGEiLCJzaWJsaW5ncyIsIm9wZW5TZXR0aW5ncyIsIm1lbnVJdGVtIiwiX3RoaXMiLCIkbWVudVBhbmVscyIsInBhcmVudHMiLCJ2YWwiLCJlYWNoIiwiJGNvbnRlbnQiLCIkcGFuZWwiLCJjaGlsZHJlbiIsImxlbmd0aCIsIiR0YWJQYW5lbCIsImFwcGVuZCIsImhhc0NsYXNzIiwiaW5pdE1lZ2FDb2x1bW5zIiwiaW5pdEJhY2tncm91bmRGaWVsZHMiLCJpbml0SWNvbkZpZWxkcyIsIm5leHQiLCJzdGVwcyIsIiRjb2x1bW4iLCJjbG9zZXN0Iiwid2lkdGgiLCJjdXJyZW50IiwiaW5kZXhPZiIsInN0eWxlIiwiJGNvbHVtbnMiLCJkZWZhdWx0V2lkdGgiLCJTdHJpbmciLCJ0b0ZpeGVkIiwiY29sdW1uIiwiZGF0YXNldCIsIndwQ29sb3JQaWNrZXIiLCJvZmYiLCJ1cmwiLCJzdGF0ZSIsImdldCIsImZpcnN0IiwidG9KU09OIiwib3BlbiIsIiRjb250YWluZXIiLCIkaW5wdXQiLCIkcHJldmlldyIsIiRpY29ucyIsIiR0YXJnZXQiLCJ0ZXJtIiwidG9VcHBlckNhc2UiLCIkaWNvbkNvbnRhaW5lciIsImZpbHRlciIsIiRtZW51SXRlbSIsIiRtZW51RGF0YSIsImNoaWxkTWVudUl0ZW1zIiwiZGVwdGgiLCJtZW51SXRlbURlcHRoIiwibWVnYURhdGEiLCJtZWdhX3dpZHRoIiwiaW1nX3R5cGUiLCJpbWdfc2l6ZSIsImltZ19wb3MiLCJpbWdfbm9fbWFyZ2luIiwiaWNvbl9wb3MiLCJoaWRlX3RleHQiLCJoaWRlX2Rlc2t0b3AiLCJoaWRlX21vYmlsZSIsImhpZGVfaW1nX2Rlc2t0b3AiLCJoaWRlX2ltZ19tb2JpbGUiLCJob3QiLCJ1cHBlcmNhc2VfdGV4dCIsIm5ldyIsInRyZW5kaW5nIiwic2FsZSIsImRpc2FibGVfbGluayIsIm9yaWdpbmFsRWxlbWVudCIsImlzRW1wdHkiLCJpdGVtIiwiJGl0ZW0iLCIkaXRlbURhdGEiLCJwdXNoIiwic3ViRGVwdGgiLCJzZXRJdGVtRGF0YSIsImNoZWNrYm94ZXMiLCJpbmRleCIsInZhbHVlIiwiaGFzIiwiJGRhdGFIb2xkZXIiLCJnZXRGaWVsZE5hbWUiLCJuYW1lIiwiaWQiLCJzcGxpdCIsImpvaW4iLCJzZXJpYWxpemUiLCIkc3Bpbm5lciIsInBvc3QiLCJhamF4dXJsIiwiYWN0aW9uIiwicmVzIiwic3VjY2VzcyIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsZUFFQSxTQUFBQyxFQUFBQyxHQUNBLFlBRUEsSUFBQUMsRUFDQUEsR0FBQUgsY0FDQUksS0FBQSxXQUNBRCxFQUFBRSxNQUFBSixFQUFBLFFBQ0FFLEVBQUFHLE9BQUFMLEVBQUEsZUFDQUUsRUFBQUksaUJBQUFOLEVBQUEsaUNBQ0FFLEVBQUFLLFlBQ0FMLEVBQUFNLFdBQ0FDLE1BQUFSLEVBQUFTLFNBQUFWLEVBQUEsa0JBQUFXLFFBQ0FDLE1BQUFYLEVBQUFTLFNBQUFWLEVBQUEsa0JBQUFXLFFBQ0FFLEtBQUFa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OUMsRUFBQStILElBQUFwRixFQUFBRyxFQUFBSCxLQUFBLHFCQUlBMUMsRUFBQTBILFlBQUE3RSxFQUFBc0UsZ0JBQUF6RSxFQUFBRyxFQUFBSCxLQUFBLG9CQUFBLEtBR0E0RixFQUFBeEcsWUFBQSxhQUNBOUIsRUFBQXlCLGlCQUdBLElBSUEzQixFQUFBLFdBQ0FELGFBQUFJLFVBRUEySSxPQUFBN0kiLCJmaWxlIjoibWVnYS1tZW51Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBtZW51U2V0dGluZ3M7XHJcblxyXG4oZnVuY3Rpb24gKCQsIF8pIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdHZhciBvcHRpb25zO1xyXG5cdG9wdGlvbnMgPSBtZW51U2V0dGluZ3MgPSB7XHJcblx0XHRpbml0OiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdG9wdGlvbnMuJGJvZHkgPSAkKCdib2R5Jyk7XHJcblx0XHRcdG9wdGlvbnMuJG1vZGFsID0gJCgnI21lbnUtbW9kYWwnKTtcclxuXHRcdFx0b3B0aW9ucy4kcHJpbWFyeUNoZWNrYm94ID0gJCgnI2xvY2F0aW9ucy1wcmltYXJ5X25hdmlnYXRpb24nKTtcclxuXHRcdFx0b3B0aW9ucy5pdGVtRGF0YSA9IHt9O1xyXG5cdFx0XHRvcHRpb25zLnRlbXBsYXRlcyA9IHtcclxuXHRcdFx0XHRtZW51cyAgICAgOiBfLnRlbXBsYXRlKCQoJyNwcC10bXBsLW1lbnVzJykuaHRtbCgpKSxcclxuXHRcdFx0XHR0aXRsZSAgICAgOiBfLnRlbXBsYXRlKCQoJyNwcC10bXBsLXRpdGxlJykuaHRtbCgpKSxcclxuXHRcdFx0XHRtZWdhICAgICAgOiBfLnRlbXBsYXRlKCQoJyNwcC10bXBsLW1lZ2EnKS5odG1sKCkpLFxyXG5cdFx0XHRcdGJhY2tncm91bmQ6IF8udGVtcGxhdGUoJCgnI3BwLXRtcGwtYmFja2dyb3VuZCcpLmh0bWwoKSksXHJcblx0XHRcdFx0aWNvbiAgICAgIDogXy50ZW1wbGF0ZSgkKCcjcHAtdG1wbC1pY29uJykuaHRtbCgpKSxcclxuXHRcdFx0XHRjb250ZW50ICAgOiBfLnRlbXBsYXRlKCQoJyNwcC10bXBsLWNvbnRlbnQnKS5odG1sKCkpLFxyXG5cdFx0XHRcdGdlbmVyYWwgICA6IF8udGVtcGxhdGUoJCgnI3BwLXRtcGwtZ2VuZXJhbCcpLmh0bWwoKSlcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdG9wdGlvbnMuZnJhbWUgPSB3cC5tZWRpYSh7XHJcblx0XHRcdFx0bGlicmFyeToge1xyXG5cdFx0XHRcdFx0dHlwZTogJ2ltYWdlJ1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLmluaXRBY3Rpb25zKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGluaXRBY3Rpb25zOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdG9wdGlvbnMuJGJvZHlcclxuXHRcdFx0XHQub24oJ2NsaWNrJywgJy5vcGVuc2V0dGluZ3MnLCB0aGlzLm9wZW5Nb2RhbClcclxuXHRcdFx0XHQub24oJ2NsaWNrJywgJy5tZWdhLW1vZGFsLWJhY2tkcm9wLCAubWVnYS1tb2RhbC1jbG9zZSwgLnBwLWJ1dHRvbi1jYW5jZWwnLCB0aGlzLmNsb3NlTW9kYWwpO1xyXG5cclxuXHRcdFx0b3B0aW9ucy4kbW9kYWxcclxuXHRcdFx0XHQub24oJ2NsaWNrJywgJy5wcC1tZWdhLW1lbnUtaXRlbS1zZXR0aW5nLXRhYiBhJywgdGhpcy5zd2l0Y2hQYW5lbClcclxuXHRcdFx0XHQub24oJ2NsaWNrJywgJy5pdGVtLWNvbnRyb2xzIHNwYW4nLCB0aGlzLnJlc2l6ZU1lZ2FDb2x1bW4pXHJcblx0XHRcdFx0Lm9uKCdjbGljaycsICcucHAtYnV0dG9uLXNhdmUnLCB0aGlzLnNhdmVDaGFuZ2VzKTtcclxuXHJcbiAgICAgICAgICAgIG9wdGlvbnMuJHByaW1hcnlDaGVja2JveFxyXG4gICAgICAgICAgICAgICAgLm9uKCAnY2hhbmdlJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoICEkKCB0aGlzICkuaXMoICc6Y2hlY2tlZCcgKSApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLiRib2R5LmFkZENsYXNzKCAnaGlkZS1zZXR0aW5ncycgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLiRib2R5LnJlbW92ZUNsYXNzKCAnaGlkZS1zZXR0aW5ncycgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcblx0XHRcdGlmICggIW9wdGlvbnMuJHByaW1hcnlDaGVja2JveC5pcyggJzpjaGVja2VkJyApICl7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLiRib2R5LmFkZENsYXNzKCAnaGlkZS1zZXR0aW5ncycgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuJGJvZHkucmVtb3ZlQ2xhc3MoICdoaWRlLXNldHRpbmdzJyApO1xyXG4gICAgICAgICAgICB9XHJcblx0XHR9LFxyXG5cclxuXHRcdG9wZW5Nb2RhbDogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRvcHRpb25zLmdldEl0ZW1EYXRhKHRoaXMpO1xyXG5cclxuXHRcdFx0b3B0aW9ucy4kbW9kYWwuc2hvdygpO1xyXG5cdFx0XHRvcHRpb25zLiRib2R5LmFkZENsYXNzKCdtb2RhbC1vcGVuJyk7XHJcblx0XHRcdG9wdGlvbnMucmVuZGVyKHRoaXMpO1xyXG5cclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRjbG9zZU1vZGFsOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdG9wdGlvbnMuJG1vZGFsLmhpZGUoKS5maW5kKCcucHAtbWVudS1pdGVtLXRhYi1jb250ZW50JykuaHRtbCgnJyk7XHJcblx0XHRcdG9wdGlvbnMuJGJvZHkucmVtb3ZlQ2xhc3MoJ21vZGFsLW9wZW4nKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRzd2l0Y2hQYW5lbDogZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdFx0dmFyICRlbCA9ICQodGhpcykucGFyZW50KCksXHJcblx0XHRcdFx0cGFuZWwgPSAkZWwuZGF0YSgncGFuZWwnKTtcclxuXHJcblx0XHRcdCRlbC5hZGRDbGFzcygnYWN0aXZlLWl0ZW0tc2V0dGluZy10YWInKS5zaWJsaW5ncygnLmFjdGl2ZS1pdGVtLXNldHRpbmctdGFiJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZS1pdGVtLXNldHRpbmctdGFiJyk7XHJcblx0XHRcdG9wdGlvbnMub3BlblNldHRpbmdzKHBhbmVsKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0cmVuZGVyOiBmdW5jdGlvbiAobWVudUl0ZW0pIHtcclxuXHRcdFx0dmFyIF90aGlzID0gdGhpcztcclxuXHJcblx0XHRcdC8vIFJlbmRlciBtZW51XHJcblx0XHRcdG9wdGlvbnMuJG1vZGFsLmZpbmQoJy5wcC1tZWdhLW1lbnUtaXRlbS1zZXR0aW5nLXRhYnMnKS5odG1sKG9wdGlvbnMudGVtcGxhdGVzLm1lbnVzKG9wdGlvbnMuaXRlbURhdGEpKTtcclxuXHJcblx0XHRcdHZhciAkbWVudVBhbmVscyA9IG9wdGlvbnMuJG1vZGFsLmZpbmQoJy5wcC1tZWdhLW1lbnUtaXRlbS1zZXR0aW5nLXRhYnMgLnBwLW1lZ2EtbWVudS10by1jb250ZW50Jyk7XHJcblxyXG5cdFx0XHQvLyBSZW5kZXIgdGl0bGVcclxuXHRcdFx0dmFyIHRpdGxlID0gJChtZW51SXRlbSkucGFyZW50cygnLm1lbnUtaXRlbS1zZXR0aW5ncycpLmZpbmQoJ2lucHV0LmVkaXQtbWVudS1pdGVtLXRpdGxlJykudmFsKCk7XHJcblx0XHRcdG9wdGlvbnMuJG1vZGFsLmZpbmQoJy5wcC1tZWdhLW1lbnUtaXRlbS1oZWFkZXItYmFyJykuaHRtbChvcHRpb25zLnRlbXBsYXRlcy50aXRsZSh7dGl0bGU6IHRpdGxlfSkpO1xyXG5cclxuXHRcdFx0Ly8gUmVuZGVyIGNvbnRlbnRcclxuXHRcdFx0JG1lbnVQYW5lbHMuZWFjaChmdW5jdGlvbigpe1xyXG5cdFx0XHRcdF90aGlzLm9wZW5TZXR0aW5ncygkKHRoaXMpLmRhdGEoJ3BhbmVsJykpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0b3BlblNldHRpbmdzOiBmdW5jdGlvbiAocGFuZWwpIHtcclxuXHRcdFx0dmFyICRjb250ZW50ID0gb3B0aW9ucy4kbW9kYWwuZmluZCgnLnBwLW1lbnUtaXRlbS10YWItY29udGVudCcpLFxyXG5cdFx0XHRcdCRwYW5lbCA9ICRjb250ZW50LmNoaWxkcmVuKCcjaW5zaWRlLScgKyBwYW5lbCk7XHJcblxyXG5cdFx0XHRpZiAoJHBhbmVsLmxlbmd0aCkge1xyXG5cdFx0XHRcdCRwYW5lbC5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dmFyICR0YWJQYW5lbCA9IG9wdGlvbnMuJG1vZGFsLmZpbmQoJy5wcC1tZWdhLW1lbnUtaXRlbS1zZXR0aW5nLXRhYnMgLnBwLW1lZ2EtbWVudS10by1jb250ZW50W2RhdGEtcGFuZWw9JytwYW5lbCsnXScpO1xyXG5cclxuXHRcdFx0XHQkY29udGVudC5hcHBlbmQob3B0aW9ucy50ZW1wbGF0ZXNbcGFuZWxdKG9wdGlvbnMuaXRlbURhdGEpKTtcclxuXHJcblx0XHRcdFx0aWYgKCR0YWJQYW5lbC5oYXNDbGFzcygnYWN0aXZlLWl0ZW0tc2V0dGluZy10YWInKSl7XHJcblx0XHRcdFx0XHQkY29udGVudC5jaGlsZHJlbignI2luc2lkZS0nICsgcGFuZWwpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICgnbWVnYScgPT0gcGFuZWwpIHtcclxuXHRcdFx0XHRcdG9wdGlvbnMuaW5pdE1lZ2FDb2x1bW5zKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICgnYmFja2dyb3VuZCcgPT0gcGFuZWwpIHtcclxuXHRcdFx0XHRcdG9wdGlvbnMuaW5pdEJhY2tncm91bmRGaWVsZHMoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCdpY29uJyA9PSBwYW5lbCkge1xyXG5cdFx0XHRcdFx0b3B0aW9ucy5pbml0SWNvbkZpZWxkcygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRyZXNpemVNZWdhQ29sdW1uOiBmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHR2YXIgc3RlcHMgPSBbJzIwLjAwJScsICcyNS4wMCUnLCAnMzMuMzMlJywgJzUwLjAwJScsICc2Ni42NiUnLCAnNzUuMDAlJywgJzEwMC4wMCUnXSxcclxuXHRcdFx0XHQkZWwgPSAkKHRoaXMpLFxyXG5cdFx0XHRcdCRjb2x1bW4gPSAkZWwuY2xvc2VzdCgnLm1lbnUtaXRlbS1jb250YWluZXInKSxcclxuXHRcdFx0XHR3aWR0aCA9ICRjb2x1bW4uZGF0YSgnd2lkdGgnKSxcclxuXHRcdFx0XHRjdXJyZW50ID0gXy5pbmRleE9mKHN0ZXBzLCB3aWR0aCksXHJcblx0XHRcdFx0bmV4dDtcclxuXHJcblx0XHRcdGlmICgtMSA9PT0gY3VycmVudCkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCRlbC5oYXNDbGFzcygnc3VibWVudS1iaWdnZXInKSkge1xyXG5cdFx0XHRcdG5leHQgPSBjdXJyZW50ID09IHN0ZXBzLmxlbmd0aCA/IGN1cnJlbnQgOiBjdXJyZW50ICsgMTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRuZXh0ID0gY3VycmVudCA9PSAwID8gY3VycmVudCA6IGN1cnJlbnQgLSAxO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQkY29sdW1uWzBdLnN0eWxlLndpZHRoID0gc3RlcHNbbmV4dF07XHJcblx0XHRcdCRjb2x1bW4uZGF0YSgnd2lkdGgnLCBzdGVwc1tuZXh0XSk7XHJcblx0XHRcdCRjb2x1bW4uZmluZCgnLm1lbnUtaXRlbS1oYW5kbGUgLm1lbnUtaXRlbS13aWR0aCcpLnZhbChzdGVwc1tuZXh0XSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGluaXRNZWdhQ29sdW1uczogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHR2YXIgJGNvbHVtbnMgPSBvcHRpb25zLiRtb2RhbC5maW5kKCcjaW5zaWRlLW1lZ2EgLm1lbnUtaXRlbS1jb250YWluZXInKSxcclxuXHRcdFx0XHRkZWZhdWx0V2lkdGggPSAnMjUuMDAlJztcclxuXHJcblx0XHRcdGlmICghJGNvbHVtbnMubGVuZ3RoKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBTdXBwb3J0IG1heGltdW0gNCBjb2x1bW5zXHJcblx0XHRcdGlmICgkY29sdW1ucy5sZW5ndGggPCA0KSB7XHJcblx0XHRcdFx0ZGVmYXVsdFdpZHRoID0gU3RyaW5nKCggMTAwIC8gJGNvbHVtbnMubGVuZ3RoICkudG9GaXhlZCgyKSkgKyAnJSc7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdF8uZWFjaCgkY29sdW1ucywgZnVuY3Rpb24gKGNvbHVtbikge1xyXG5cdFx0XHRcdHZhciB3aWR0aCA9IGNvbHVtbi5kYXRhc2V0LndpZHRoO1xyXG5cclxuXHRcdFx0XHR3aWR0aCA9IHdpZHRoIHx8IGRlZmF1bHRXaWR0aDtcclxuXHJcblx0XHRcdFx0Y29sdW1uLnN0eWxlLndpZHRoID0gd2lkdGg7XHJcblx0XHRcdFx0Y29sdW1uLmRhdGFzZXQud2lkdGggPSB3aWR0aDtcclxuXHRcdFx0XHQkKGNvbHVtbikuZmluZCgnLm1lbnUtaXRlbS1oYW5kbGUgLm1lbnUtaXRlbS13aWR0aCcpLnZhbCh3aWR0aCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRpbml0QmFja2dyb3VuZEZpZWxkczogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRvcHRpb25zLiRtb2RhbC5maW5kKCcuYmFja2dyb3VuZC1jb2xvci1waWNrZXInKS53cENvbG9yUGlja2VyKCk7XHJcblxyXG5cdFx0XHQvLyBCYWNrZ3JvdW5kIGltYWdlXHJcblx0XHRcdG9wdGlvbnMuJG1vZGFsLm9uKCdjbGljaycsICcuaXRlbS1tZWRpYSAudXBsb2FkLWJ1dHRvbicsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdFx0XHR2YXIgJGVsID0gJCh0aGlzKTtcclxuXHJcblx0XHRcdFx0Ly8gUmVtb3ZlIGFsbCBhdHRhY2hlZCAnc2VsZWN0JyBldmVudFxyXG5cdFx0XHRcdG9wdGlvbnMuZnJhbWUub2ZmKCdzZWxlY3QnKTtcclxuXHJcblx0XHRcdFx0Ly8gVXBkYXRlIGlucHV0cyB3aGVuIHNlbGVjdCBpbWFnZVxyXG5cdFx0XHRcdG9wdGlvbnMuZnJhbWUub24oJ3NlbGVjdCcsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRcdC8vIFVwZGF0ZSBpbnB1dCB2YWx1ZSBmb3Igc2luZ2xlIGltYWdlIHNlbGVjdGlvblxyXG5cdFx0XHRcdFx0dmFyIHVybCA9IG9wdGlvbnMuZnJhbWUuc3RhdGUoKS5nZXQoJ3NlbGVjdGlvbicpLmZpcnN0KCkudG9KU09OKCkudXJsO1xyXG5cclxuXHRcdFx0XHRcdCRlbC5zaWJsaW5ncygnLnRodW1ibmFpbC1pbWFnZScpLmh0bWwoJzxpbWcgc3JjPVwiJyArIHVybCArICdcIj4nKTtcclxuXHRcdFx0XHRcdCRlbC5zaWJsaW5ncygnaW5wdXQnKS52YWwodXJsKTtcclxuXHRcdFx0XHRcdCRlbC5hZGRDbGFzcygnaGlkZGVuJyk7XHJcblx0XHRcdFx0XHQkZWwuc2libGluZ3MoJy5yZW1vdmUtYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRvcHRpb25zLmZyYW1lLm9wZW4oKTtcclxuXHRcdFx0fSkub24oJ2NsaWNrJywgJy5pdGVtLW1lZGlhIC5yZW1vdmUtYnV0dG9uJywgZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHRcdHZhciAkZWwgPSAkKHRoaXMpO1xyXG5cclxuXHRcdFx0XHQkZWwuc2libGluZ3MoJy50aHVtYm5haWwtaW1hZ2UnKS5odG1sKCcnKTtcclxuXHRcdFx0XHQkZWwuc2libGluZ3MoJ2lucHV0JykudmFsKCcnKTtcclxuXHRcdFx0XHQkZWwuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG5cdFx0XHRcdCRlbC5zaWJsaW5ncygnLnVwbG9hZC1idXR0b24nKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gSW1hZ2UgdHlwZVxyXG5cdFx0XHRvcHRpb25zLiRtb2RhbC5vbignY2hhbmdlJywgJy5pbWFnZS1zaXplIHNlbGVjdCcsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHR2YXIgJGVsID0gJCh0aGlzKSxcclxuXHRcdFx0XHRcdCRjb250YWluZXIgPSAkZWwucGFyZW50cygnLmluc2lkZS1iYWNrZ3JvdW5kJyk7XHJcblxyXG5cdFx0XHRcdGlmICgnYmFja2dyb3VuZCcgPT0gJGVsLnZhbCgpKSB7XHJcblx0XHRcdFx0XHQkY29udGFpbmVyLmZpbmQoJy5iYWNrZ3JvdW5kLXBvc2l0aW9uLCAuYmFja2dyb3VuZC1yZXBlYXQsIC5iYWNrZ3JvdW5kLXNpemUnKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcblx0XHRcdFx0XHQkY29udGFpbmVyLmZpbmQoJy5pbWFnZS1wb3NpdGlvbiwgLmltYWdlLW1hcmdpbicpLmFkZENsYXNzKCdoaWRkZW4nKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JGNvbnRhaW5lci5maW5kKCcuYmFja2dyb3VuZC1wb3NpdGlvbiwgLmJhY2tncm91bmQtcmVwZWF0LCAuYmFja2dyb3VuZC1zaXplJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG5cdFx0XHRcdFx0JGNvbnRhaW5lci5maW5kKCcuaW1hZ2UtcG9zaXRpb24sIC5pbWFnZS1tYXJnaW4nKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0aW5pdEljb25GaWVsZHM6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0dmFyICRpbnB1dCA9IG9wdGlvbnMuJG1vZGFsLmZpbmQoJyNwcC1pY29uLWlucHV0JyksXHJcblx0XHRcdFx0JHByZXZpZXcgPSBvcHRpb25zLiRtb2RhbC5maW5kKCcucHAtaWNvbi1zZWxlY3RvciAuc2VsZWN0ZWQtaWNvbicpLFxyXG5cdFx0XHRcdCRpY29ucyA9IG9wdGlvbnMuJG1vZGFsLmZpbmQoJy5wcC1pY29uLXNlbGVjdG9yIC5pY29ucy1jb250ZW50IGknKTtcclxuXHJcblx0XHRcdC8vIFNlbGVjdCBhbiBpY29uXHJcblx0XHRcdG9wdGlvbnMuJG1vZGFsLm9uKCdjbGljaycsICcucHAtaWNvbi1zZWxlY3RvciAuaWNvbnMtY29udGVudCBzcGFuJywgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdHZhciAkZWwgPSAkKHRoaXMpLFxyXG5cdFx0XHRcdFx0aWNvbiA9ICRlbC5maW5kKCdpJykuZGF0YSgnaWNvbicpO1xyXG5cclxuXHRcdFx0XHQkKCcucHAtaWNvbi1zZWxlY3RvciAuaWNvbnMtY29udGVudCBzcGFuLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHRcdFx0XHQkZWwuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuXHRcdFx0XHQkaW5wdXQudmFsKGljb24pO1xyXG5cdFx0XHRcdCRwcmV2aWV3Lmh0bWwoJzxpIGNsYXNzPVwiJyArIGljb24gKyAnXCI+PC9pPicpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIERlbGV0ZSB0aGUgc2VsZWN0ZWQgaWNvblxyXG5cdFx0XHRvcHRpb25zLiRtb2RhbC5vbignY2xpY2snLCAnLnBwLWljb24tc2VsZWN0b3IgLnJlbW92ZS1pY29uJywgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdCRwcmV2aWV3Lmh0bWwoJycpO1xyXG5cdFx0XHRcdCRpbnB1dC52YWwoJycpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIFRhYiBpY29uc1xyXG5cdFx0XHRvcHRpb25zLiRtb2RhbC5vbignY2xpY2snLCAnLnBwLWljb24tc2VsZWN0b3IgLmljb25zLXRhYicsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHR2YXIgJGVsID0gJCh0aGlzKSxcclxuXHRcdFx0XHRcdCR0YXJnZXQgPSAkKCcucHAtaWNvbi1zZWxlY3RvciAuaWNvbnMtY29udGVudC4nICsgJGVsLmRhdGEoJ3RhYicpICk7XHJcblxyXG5cdFx0XHRcdGlmICghJGVsLmhhc0NsYXNzKCdhY3RpdmUnKSl7XHJcblx0XHRcdFx0XHQkZWwuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCcuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cdFx0XHRcdFx0JHRhcmdldC5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoJy5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIFNlYXJjaCBmb3IgaWNvbnNcclxuXHRcdFx0b3B0aW9ucy4kbW9kYWwub24oJ2tleXVwJywgJy5wcC1pY29uLXNlYXJjaCcsIGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdFx0dmFyIHRlcm0gPSAkKHRoaXMpLnZhbCgpLnRvVXBwZXJDYXNlKCksXHJcblx0XHRcdFx0XHQkaWNvbkNvbnRhaW5lciA9ICRpY29ucy5wYXJlbnQoKTtcclxuXHJcblx0XHRcdFx0aWYgKCF0ZXJtKSB7XHJcblx0XHRcdFx0XHQkaWNvbkNvbnRhaW5lci5zaG93KCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdCRpY29uQ29udGFpbmVyLmhpZGUoKS5maWx0ZXIoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gJCh0aGlzKS5maW5kKCdpJykuZGF0YSgnaWNvbicpLnRvVXBwZXJDYXNlKCkuaW5kZXhPZih0ZXJtKSA+IC0xO1xyXG5cdFx0XHRcdFx0fSkuc2hvdygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGdldEl0ZW1EYXRhOiBmdW5jdGlvbiAobWVudUl0ZW0pIHtcclxuXHRcdFx0dmFyICRtZW51SXRlbSA9ICQobWVudUl0ZW0pLmNsb3Nlc3QoJ2xpLm1lbnUtaXRlbScpLFxyXG5cdFx0XHRcdCRtZW51RGF0YSA9ICRtZW51SXRlbS5maW5kKCcucHAtZGF0YScpLFxyXG5cdFx0XHRcdGNoaWxkcmVuID0gJG1lbnVJdGVtLmNoaWxkTWVudUl0ZW1zKCk7XHJcblxyXG5cdFx0XHRvcHRpb25zLml0ZW1EYXRhID0ge1xyXG5cdFx0XHRcdGRlcHRoICAgICAgICAgIDogJG1lbnVJdGVtLm1lbnVJdGVtRGVwdGgoKSxcclxuXHRcdFx0XHRtZWdhRGF0YSAgICAgICA6IHtcclxuXHRcdFx0XHRcdG1lZ2EgICAgICAgICBcdFx0OiAkbWVudURhdGEuZGF0YSgnbWVnYScpLFxyXG5cdFx0XHRcdFx0bWVnYV93aWR0aCAgIFx0XHQ6ICRtZW51RGF0YS5kYXRhKCdtZWdhX3dpZHRoJyksXHJcblx0XHRcdFx0XHR3aWR0aCAgICAgICAgXHRcdDogJG1lbnVEYXRhLmRhdGEoJ3dpZHRoJyksXHJcblx0XHRcdFx0XHRiYWNrZ3JvdW5kICAgXHRcdDogJG1lbnVEYXRhLmRhdGEoJ2JhY2tncm91bmQnKSxcclxuXHRcdFx0XHRcdGltZ190eXBlXHRcdFx0OiAkbWVudURhdGEuZGF0YSgnaW1nX3R5cGUnKSxcclxuXHRcdFx0XHRcdGltZ19zaXplXHRcdFx0OiAkbWVudURhdGEuZGF0YSgnaW1nX3NpemUnKSxcclxuXHRcdFx0XHRcdGltZ19wb3NcdFx0XHRcdDogJG1lbnVEYXRhLmRhdGEoJ2ltZ19wb3MnKSxcclxuXHRcdFx0XHRcdGltZ19ub19tYXJnaW4gIFx0XHQ6ICRtZW51RGF0YS5kYXRhKCdpbWdfbm9fbWFyZ2luJyksXHJcblx0XHRcdFx0XHRpY29uICAgICAgICAgXHRcdDogJG1lbnVEYXRhLmRhdGEoJ2ljb24nKSxcclxuXHRcdFx0XHRcdGljb25fcG9zICAgICAgIFx0XHQ6ICRtZW51RGF0YS5kYXRhKCdpY29uX3BvcycpLFxyXG5cdFx0XHRcdFx0aGlkZV90ZXh0ICAgICBcdFx0OiAkbWVudURhdGEuZGF0YSgnaGlkZV90ZXh0JyksXHJcblx0XHRcdFx0XHRoaWRlX2Rlc2t0b3AgIFx0XHQ6ICRtZW51RGF0YS5kYXRhKCdoaWRlX2Rlc2t0b3AnKSxcclxuXHRcdFx0XHRcdGhpZGVfbW9iaWxlICAgXHRcdDogJG1lbnVEYXRhLmRhdGEoJ2hpZGVfbW9iaWxlJyksXHJcblx0XHRcdFx0XHRoaWRlX2ltZ19kZXNrdG9wICBcdDogJG1lbnVEYXRhLmRhdGEoJ2hpZGVfaW1nX2Rlc2t0b3AnKSxcclxuXHRcdFx0XHRcdGhpZGVfaW1nX21vYmlsZSAgXHQ6ICRtZW51RGF0YS5kYXRhKCdoaWRlX2ltZ19tb2JpbGUnKSxcclxuXHRcdFx0XHRcdGhvdCAgICAgICAgICBcdFx0OiAkbWVudURhdGEuZGF0YSgnaG90JyksXHJcblx0XHRcdFx0XHR1cHBlcmNhc2VfdGV4dFx0XHQ6ICRtZW51RGF0YS5kYXRhKCd1cHBlcmNhc2VfdGV4dCcpLFxyXG5cdFx0XHRcdFx0bmV3ICAgICAgICAgIFx0XHQ6ICRtZW51RGF0YS5kYXRhKCduZXcnKSxcclxuXHRcdFx0XHRcdHRyZW5kaW5nICAgICBcdFx0OiAkbWVudURhdGEuZGF0YSgndHJlbmRpbmcnKSxcclxuXHRcdFx0XHRcdHNhbGUgICAgIFx0XHRcdDogJG1lbnVEYXRhLmRhdGEoJ3NhbGUnKSxcclxuXHRcdFx0XHRcdGRpc2FibGVfbGluayAgXHRcdDogJG1lbnVEYXRhLmRhdGEoJ2Rpc2FibGVfbGluaycpLFxyXG5cdFx0XHRcdFx0Y29udGVudCAgICAgIFx0XHQ6ICRtZW51RGF0YS5odG1sKClcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGRhdGEgICAgICAgICAgIDogJG1lbnVJdGVtLmdldEl0ZW1EYXRhKCksXHJcblx0XHRcdFx0Y2hpbGRyZW4gICAgICAgOiBbXSxcclxuXHRcdFx0XHRvcmlnaW5hbEVsZW1lbnQ6ICRtZW51SXRlbS5nZXQoMClcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdGlmICghXy5pc0VtcHR5KGNoaWxkcmVuKSkge1xyXG5cdFx0XHRcdF8uZWFjaChjaGlsZHJlbiwgZnVuY3Rpb24gKGl0ZW0pIHtcclxuXHRcdFx0XHRcdHZhciAkaXRlbSA9ICQoaXRlbSksXHJcblx0XHRcdFx0XHRcdCRpdGVtRGF0YSA9ICRpdGVtLmZpbmQoJy5wcC1kYXRhJyksXHJcblx0XHRcdFx0XHRcdGRlcHRoID0gJGl0ZW0ubWVudUl0ZW1EZXB0aCgpO1xyXG5cclxuXHRcdFx0XHRcdG9wdGlvbnMuaXRlbURhdGEuY2hpbGRyZW4ucHVzaCh7XHJcblx0XHRcdFx0XHRcdGRlcHRoICAgICAgICAgIDogZGVwdGgsXHJcblx0XHRcdFx0XHRcdHN1YkRlcHRoICAgICAgIDogZGVwdGggLSBvcHRpb25zLml0ZW1EYXRhLmRlcHRoIC0gMSxcclxuXHRcdFx0XHRcdFx0ZGF0YSAgICAgICAgICAgOiAkaXRlbS5nZXRJdGVtRGF0YSgpLFxyXG5cdFx0XHRcdFx0XHRtZWdhRGF0YSAgICAgICA6IHtcclxuXHRcdFx0XHRcdFx0XHRtZWdhICAgICAgICAgXHRcdDogJGl0ZW1EYXRhLmRhdGEoJ21lZ2EnKSxcclxuXHRcdFx0XHRcdFx0XHRtZWdhX3dpZHRoICAgXHRcdDogJGl0ZW1EYXRhLmRhdGEoJ21lZ2Ffd2lkdGgnKSxcclxuXHRcdFx0XHRcdFx0XHR3aWR0aCAgICAgICAgXHRcdDogJGl0ZW1EYXRhLmRhdGEoJ3dpZHRoJyksXHJcblx0XHRcdFx0XHRcdFx0YmFja2dyb3VuZCAgIFx0XHQ6ICRpdGVtRGF0YS5kYXRhKCdiYWNrZ3JvdW5kJyksXHJcblx0XHRcdFx0XHRcdFx0aW1nX3R5cGVcdFx0ICAgXHQ6ICRpdGVtRGF0YS5kYXRhKCdpbWdfdHlwZScpLFxyXG5cdFx0XHRcdFx0XHRcdGltZ19zaXplXHRcdCAgIFx0OiAkaXRlbURhdGEuZGF0YSgnaW1nX3NpemUnKSxcclxuXHRcdFx0XHRcdFx0XHRpbWdfcG9zXHRcdCAgIFx0XHQ6ICRpdGVtRGF0YS5kYXRhKCdpbWdfcG9zJyksXHJcblx0XHRcdFx0XHRcdFx0aW1nX25vX21hcmdpbiAgXHRcdDogJGl0ZW1EYXRhLmRhdGEoJ2ltZ19ub19tYXJnaW4nKSxcclxuXHRcdFx0XHRcdFx0XHRpY29uICAgICAgICAgXHRcdDogJGl0ZW1EYXRhLmRhdGEoJ2ljb24nKSxcclxuXHRcdFx0XHRcdFx0XHRpY29uX3BvcyAgICAgICBcdFx0OiAkaXRlbURhdGEuZGF0YSgnaWNvbl9wb3MnKSxcclxuXHRcdFx0XHRcdFx0XHRoaWRlX3RleHQgICAgIFx0XHQ6ICRpdGVtRGF0YS5kYXRhKCdoaWRlX3RleHQnKSxcclxuXHRcdFx0XHRcdFx0XHRoaWRlX2Rlc2t0b3AgIFx0XHQ6ICRpdGVtRGF0YS5kYXRhKCdoaWRlX2Rlc2t0b3AnKSxcclxuXHRcdFx0XHRcdFx0XHRoaWRlX21vYmlsZSAgIFx0XHQ6ICRpdGVtRGF0YS5kYXRhKCdoaWRlX21vYmlsZScpLFxyXG5cdFx0XHRcdFx0XHRcdGhpZGVfaW1nX2Rlc2t0b3AgXHQ6ICRpdGVtRGF0YS5kYXRhKCdoaWRlX2ltZ19kZXNrdG9wJyksXHJcblx0XHRcdFx0XHRcdFx0aGlkZV9pbWdfbW9iaWxlICAgXHQ6ICRpdGVtRGF0YS5kYXRhKCdoaWRlX2ltZ19tb2JpbGUnKSxcclxuXHRcdFx0XHRcdFx0XHRob3QgICAgICAgICAgXHRcdDogJGl0ZW1EYXRhLmRhdGEoJ2hvdCcpLFxyXG5cdFx0XHRcdFx0XHRcdHVwcGVyY2FzZV90ZXh0XHRcdDogJGl0ZW1EYXRhLmRhdGEoJ3VwcGVyY2FzZV90ZXh0JyksXHJcblx0XHRcdFx0XHRcdFx0bmV3ICAgICAgICAgIFx0XHQ6ICRpdGVtRGF0YS5kYXRhKCduZXcnKSxcclxuXHRcdFx0XHRcdFx0XHR0cmVuZGluZyAgICAgXHRcdDogJGl0ZW1EYXRhLmRhdGEoJ3RyZW5kaW5nJyksXHJcblx0XHRcdFx0XHRcdFx0c2FsZSAgICAgXHRcdFx0OiAkaXRlbURhdGEuZGF0YSgnc2FsZScpLFxyXG5cdFx0XHRcdFx0XHRcdGRpc2FibGVfbGluayAgXHRcdDogJGl0ZW1EYXRhLmRhdGEoJ2Rpc2FibGVfbGluaycpLFxyXG5cdFx0XHRcdFx0XHRcdGNvbnRlbnQgICAgICBcdFx0OiAkaXRlbURhdGEuaHRtbCgpXHJcblx0XHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRcdG9yaWdpbmFsRWxlbWVudDogaXRlbVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdHNldEl0ZW1EYXRhOiBmdW5jdGlvbiAoaXRlbSwgZGF0YSwgZGVwdGgpIHtcclxuXHRcdFx0dmFyIGNoZWNrYm94ZXMgPSBbJ21lZ2EnLCAnaGlkZV90ZXh0JywgJ3VwcGVyY2FzZV90ZXh0JywgJ2Rpc2FibGVfbGluaycsICdpbWdfbm9fbWFyZ2luJywgJ2hpZGVfZGVza3RvcCcsICdoaWRlX21vYmlsZScsICdob3QnLCAnbmV3JywgJ3RyZW5kaW5nJywgJ3NhbGUnLCAnaGlkZV9pbWdfZGVza3RvcCcsICdoaWRlX2ltZ19tb2JpbGUnXTtcclxuXHJcblx0XHRcdC8vIFNldCB0aGUgY2hlY2tib3hlcyB0byBmYWxzZSBpZiBkb2VzIG5vdCBleGlzdCBpbiB0aGUgZGF0YVxyXG5cdFx0XHQkLmVhY2goY2hlY2tib3hlcywgZnVuY3Rpb24oaW5kZXgsIHZhbHVlKXtcclxuXHRcdFx0XHRpZiAoIV8uaGFzKGRhdGEsIHZhbHVlKSkge1xyXG5cdFx0XHRcdFx0ZGF0YVt2YWx1ZV0gPSBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dmFyICRkYXRhSG9sZGVyID0gJChpdGVtKS5maW5kKCcucHAtZGF0YScpO1xyXG5cclxuXHRcdFx0aWYgKF8uaGFzKGRhdGEsICdjb250ZW50JykpIHtcclxuXHRcdFx0XHQkZGF0YUhvbGRlci5odG1sKGRhdGEuY29udGVudCk7XHJcblx0XHRcdFx0ZGVsZXRlIGRhdGEuY29udGVudDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0JGRhdGFIb2xkZXIuZGF0YShkYXRhKTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdGdldEZpZWxkTmFtZTogZnVuY3Rpb24gKG5hbWUsIGlkKSB7XHJcblx0XHRcdG5hbWUgPSBuYW1lLnNwbGl0KCcuJyk7XHJcblx0XHRcdG5hbWUgPSAnWycgKyBuYW1lLmpvaW4oJ11bJykgKyAnXSc7XHJcblxyXG5cdFx0XHRyZXR1cm4gJ21lbnUtaXRlbVsnICsgaWQgKyAnXScgKyBuYW1lO1xyXG5cdFx0fSxcclxuXHJcblx0XHRzYXZlQ2hhbmdlczogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHR2YXIgZGF0YSA9IG9wdGlvbnMuJG1vZGFsLmZpbmQoJy5wcC1tZW51LWl0ZW0tdGFiLWNvbnRlbnQgOmlucHV0Jykuc2VyaWFsaXplKCksXHJcblx0XHRcdFx0JHNwaW5uZXIgPSBvcHRpb25zLiRtb2RhbC5maW5kKCcucHAtbWVnYS1tZW51LWl0ZW0tY29udHJvbHMgLnNwaW5uZXInKTtcclxuXHJcblx0XHRcdCRzcGlubmVyLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcclxuXHJcblx0XHRcdCQucG9zdChhamF4dXJsLCB7XHJcblx0XHRcdFx0YWN0aW9uOiAncHBfc2F2ZV9tZW51X2l0ZW1fZGF0YScsXHJcblx0XHRcdFx0ZGF0YSAgOiBkYXRhXHJcblx0XHRcdH0sIGZ1bmN0aW9uIChyZXMpIHtcclxuXHRcdFx0XHRpZiAoIXJlcy5zdWNjZXNzKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR2YXIgZGF0YSA9IHJlcy5kYXRhWydtZW51LWl0ZW0nXTtcclxuXHJcblx0XHRcdFx0Ly8gVXBkYXRlIHBhcmVudCBtZW51IGl0ZW1cclxuXHRcdFx0XHRpZiAoXy5oYXMoZGF0YSwgb3B0aW9ucy5pdGVtRGF0YS5kYXRhWydtZW51LWl0ZW0tZGItaWQnXSkpIHtcclxuXHRcdFx0XHRcdG9wdGlvbnMuc2V0SXRlbURhdGEob3B0aW9ucy5pdGVtRGF0YS5vcmlnaW5hbEVsZW1lbnQsIGRhdGFbb3B0aW9ucy5pdGVtRGF0YS5kYXRhWydtZW51LWl0ZW0tZGItaWQnXV0sIDApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Xy5lYWNoKG9wdGlvbnMuaXRlbURhdGEuY2hpbGRyZW4sIGZ1bmN0aW9uIChtZW51SXRlbSkge1xyXG5cdFx0XHRcdFx0aWYgKCFfLmhhcyhkYXRhLCBtZW51SXRlbS5kYXRhWydtZW51LWl0ZW0tZGItaWQnXSkpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdG9wdGlvbnMuc2V0SXRlbURhdGEobWVudUl0ZW0ub3JpZ2luYWxFbGVtZW50LCBkYXRhW21lbnVJdGVtLmRhdGFbJ21lbnUtaXRlbS1kYi1pZCddXSwgMSk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdCRzcGlubmVyLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcclxuXHRcdFx0XHRvcHRpb25zLmNsb3NlTW9kYWwoKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0JChmdW5jdGlvbiAoKSB7XHJcblx0XHRtZW51U2V0dGluZ3MuaW5pdCgpO1xyXG5cdH0pO1xyXG59KShqUXVlcnksIF8pO1xyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
